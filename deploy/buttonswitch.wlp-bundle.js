(()=>{var Rn=Object.create;var Re=Object.defineProperty;var Pn=Object.getOwnPropertyDescriptor;var In=Object.getOwnPropertyNames;var Wn=Object.getPrototypeOf,En=Object.prototype.hasOwnProperty;var J=(e,t)=>()=>(e&&(t=e(e=0)),t);var Y=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var He=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of In(t))!En.call(e,a)&&a!==n&&Re(e,a,{get:()=>t[a],enumerable:!(r=Pn(t,a))||r.enumerable});return e};var K=(e,t,n)=>(n=e!=null?Rn(Wn(e)):{},He(t||!e||!e.__esModule?Re(n,"default",{value:e,enumerable:!0}):n,e)),ee=e=>He(Re({},"__esModule",{value:!0}),e);var $=Y(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.setMatrixArrayType=qn;G.toRadian=Dn;G.equals=Fn;G.RANDOM=G.ARRAY_TYPE=G.EPSILON=void 0;var Ye=1e-6;G.EPSILON=Ye;var Ne=typeof Float32Array<"u"?Float32Array:Array;G.ARRAY_TYPE=Ne;var Cn=Math.random;G.RANDOM=Cn;function qn(e){G.ARRAY_TYPE=Ne=e}var kn=Math.PI/180;function Dn(e){return e*kn}function Fn(e,t){return Math.abs(e-t)<=Ye*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)})});var Ge=Y(z=>{"use strict";function ve(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ve=function(n){return typeof n}:ve=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ve(e)}Object.defineProperty(z,"__esModule",{value:!0});z.create=Vn;z.clone=jn;z.copy=Hn;z.identity=Yn;z.fromValues=Nn;z.set=Bn;z.transpose=Xn;z.invert=Qn;z.adjoint=Gn;z.determinant=Un;z.multiply=Xe;z.rotate=Zn;z.scale=$n;z.fromRotation=Jn;z.fromScaling=Kn;z.str=er;z.frob=tr;z.LDU=nr;z.add=rr;z.subtract=Qe;z.exactEquals=ir;z.equals=ar;z.multiplyScalar=sr;z.multiplyScalarAndAdd=or;z.sub=z.mul=void 0;var le=zn($());function Be(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Be=function(a){return a?n:t})(e)}function zn(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ve(e)!=="object"&&typeof e!="function")return{default:e};var n=Be(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function Vn(){var e=new le.ARRAY_TYPE(4);return le.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function jn(e){var t=new le.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Hn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Yn(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function Nn(e,t,n,r){var a=new le.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function Bn(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function Xn(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function Qn(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=n*s-a*r;return l?(l=1/l,e[0]=s*l,e[1]=-r*l,e[2]=-a*l,e[3]=n*l,e):null}function Gn(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function Un(e){return e[0]*e[3]-e[2]*e[1]}function Xe(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[0],c=n[1],d=n[2],i=n[3];return e[0]=r*f+s*c,e[1]=a*f+l*c,e[2]=r*d+s*i,e[3]=a*d+l*i,e}function Zn(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=Math.sin(n),c=Math.cos(n);return e[0]=r*c+s*f,e[1]=a*c+l*f,e[2]=r*-f+s*c,e[3]=a*-f+l*c,e}function $n(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[0],c=n[1];return e[0]=r*f,e[1]=a*f,e[2]=s*c,e[3]=l*c,e}function Jn(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function Kn(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function er(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function tr(e){return Math.hypot(e[0],e[1],e[2],e[3])}function nr(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function rr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Qe(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function ir(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ar(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=t[0],f=t[1],c=t[2],d=t[3];return Math.abs(n-l)<=le.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=le.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-c)<=le.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-d)<=le.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))}function sr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function or(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}var lr=Xe;z.mul=lr;var cr=Qe;z.sub=cr});var Je=Y(V=>{"use strict";function _e(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_e=function(n){return typeof n}:_e=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_e(e)}Object.defineProperty(V,"__esModule",{value:!0});V.create=hr;V.clone=dr;V.copy=ur;V.identity=pr;V.fromValues=vr;V.set=_r;V.invert=mr;V.determinant=yr;V.multiply=Ze;V.rotate=gr;V.scale=Mr;V.translate=br;V.fromRotation=Ar;V.fromScaling=wr;V.fromTranslation=xr;V.str=Tr;V.frob=Lr;V.add=Sr;V.subtract=$e;V.multiplyScalar=Or;V.multiplyScalarAndAdd=Rr;V.exactEquals=Pr;V.equals=Ir;V.sub=V.mul=void 0;var te=fr($());function Ue(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Ue=function(a){return a?n:t})(e)}function fr(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||_e(e)!=="object"&&typeof e!="function")return{default:e};var n=Ue(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function hr(){var e=new te.ARRAY_TYPE(6);return te.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function dr(e){var t=new te.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function ur(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function pr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function vr(e,t,n,r,a,s){var l=new te.ARRAY_TYPE(6);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=a,l[5]=s,l}function _r(e,t,n,r,a,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e}function mr(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=n*s-r*a;return c?(c=1/c,e[0]=s*c,e[1]=-r*c,e[2]=-a*c,e[3]=n*c,e[4]=(a*f-s*l)*c,e[5]=(r*l-n*f)*c,e):null}function yr(e){return e[0]*e[3]-e[1]*e[2]}function Ze(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=n[0],i=n[1],o=n[2],h=n[3],u=n[4],v=n[5];return e[0]=r*d+s*i,e[1]=a*d+l*i,e[2]=r*o+s*h,e[3]=a*o+l*h,e[4]=r*u+s*v+f,e[5]=a*u+l*v+c,e}function gr(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=Math.sin(n),i=Math.cos(n);return e[0]=r*i+s*d,e[1]=a*i+l*d,e[2]=r*-d+s*i,e[3]=a*-d+l*i,e[4]=f,e[5]=c,e}function Mr(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=n[0],i=n[1];return e[0]=r*d,e[1]=a*d,e[2]=s*i,e[3]=l*i,e[4]=f,e[5]=c,e}function br(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=n[0],i=n[1];return e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=r*d+s*i+f,e[5]=a*d+l*i+c,e}function Ar(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function wr(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function xr(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function Tr(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function Lr(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function Sr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function $e(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function Or(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function Rr(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function Pr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function Ir(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=e[4],f=e[5],c=t[0],d=t[1],i=t[2],o=t[3],h=t[4],u=t[5];return Math.abs(n-c)<=te.EPSILON*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-d)<=te.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-i)<=te.EPSILON*Math.max(1,Math.abs(a),Math.abs(i))&&Math.abs(s-o)<=te.EPSILON*Math.max(1,Math.abs(s),Math.abs(o))&&Math.abs(l-h)<=te.EPSILON*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(f-u)<=te.EPSILON*Math.max(1,Math.abs(f),Math.abs(u))}var Wr=Ze;V.mul=Wr;var Er=$e;V.sub=Er});var Pe=Y(E=>{"use strict";function me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?me=function(n){return typeof n}:me=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},me(e)}Object.defineProperty(E,"__esModule",{value:!0});E.create=qr;E.fromMat4=kr;E.clone=Dr;E.copy=Fr;E.fromValues=zr;E.set=Vr;E.identity=jr;E.transpose=Hr;E.invert=Yr;E.adjoint=Nr;E.determinant=Br;E.multiply=et;E.translate=Xr;E.rotate=Qr;E.scale=Gr;E.fromTranslation=Ur;E.fromRotation=Zr;E.fromScaling=$r;E.fromMat2d=Jr;E.fromQuat=Kr;E.normalFromMat4=ei;E.projection=ti;E.str=ni;E.frob=ri;E.add=ii;E.subtract=tt;E.multiplyScalar=ai;E.multiplyScalarAndAdd=si;E.exactEquals=oi;E.equals=li;E.sub=E.mul=void 0;var X=Cr($());function Ke(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Ke=function(a){return a?n:t})(e)}function Cr(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||me(e)!=="object"&&typeof e!="function")return{default:e};var n=Ke(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function qr(){var e=new X.ARRAY_TYPE(9);return X.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function kr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function Dr(e){var t=new X.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Fr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function zr(e,t,n,r,a,s,l,f,c){var d=new X.ARRAY_TYPE(9);return d[0]=e,d[1]=t,d[2]=n,d[3]=r,d[4]=a,d[5]=s,d[6]=l,d[7]=f,d[8]=c,d}function Vr(e,t,n,r,a,s,l,f,c,d){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e[6]=f,e[7]=c,e[8]=d,e}function jr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Hr(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Yr(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=t[6],d=t[7],i=t[8],o=i*l-f*d,h=-i*s+f*c,u=d*s-l*c,v=n*o+r*h+a*u;return v?(v=1/v,e[0]=o*v,e[1]=(-i*r+a*d)*v,e[2]=(f*r-a*l)*v,e[3]=h*v,e[4]=(i*n-a*c)*v,e[5]=(-f*n+a*s)*v,e[6]=u*v,e[7]=(-d*n+r*c)*v,e[8]=(l*n-r*s)*v,e):null}function Nr(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=t[6],d=t[7],i=t[8];return e[0]=l*i-f*d,e[1]=a*d-r*i,e[2]=r*f-a*l,e[3]=f*c-s*i,e[4]=n*i-a*c,e[5]=a*s-n*f,e[6]=s*d-l*c,e[7]=r*c-n*d,e[8]=n*l-r*s,e}function Br(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],l=e[5],f=e[6],c=e[7],d=e[8];return t*(d*s-l*c)+n*(-d*a+l*f)+r*(c*a-s*f)}function et(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=t[8],h=n[0],u=n[1],v=n[2],_=n[3],p=n[4],m=n[5],g=n[6],M=n[7],b=n[8];return e[0]=h*r+u*l+v*d,e[1]=h*a+u*f+v*i,e[2]=h*s+u*c+v*o,e[3]=_*r+p*l+m*d,e[4]=_*a+p*f+m*i,e[5]=_*s+p*c+m*o,e[6]=g*r+M*l+b*d,e[7]=g*a+M*f+b*i,e[8]=g*s+M*c+b*o,e}function Xr(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=t[8],h=n[0],u=n[1];return e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=f,e[5]=c,e[6]=h*r+u*l+d,e[7]=h*a+u*f+i,e[8]=h*s+u*c+o,e}function Qr(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=t[8],h=Math.sin(n),u=Math.cos(n);return e[0]=u*r+h*l,e[1]=u*a+h*f,e[2]=u*s+h*c,e[3]=u*l-h*r,e[4]=u*f-h*a,e[5]=u*c-h*s,e[6]=d,e[7]=i,e[8]=o,e}function Gr(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ur(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Zr(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function $r(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Jr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Kr(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=n+n,f=r+r,c=a+a,d=n*l,i=r*l,o=r*f,h=a*l,u=a*f,v=a*c,_=s*l,p=s*f,m=s*c;return e[0]=1-o-v,e[3]=i-m,e[6]=h+p,e[1]=i+m,e[4]=1-d-v,e[7]=u-_,e[2]=h-p,e[5]=u+_,e[8]=1-d-o,e}function ei(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=t[6],d=t[7],i=t[8],o=t[9],h=t[10],u=t[11],v=t[12],_=t[13],p=t[14],m=t[15],g=n*f-r*l,M=n*c-a*l,b=n*d-s*l,A=r*c-a*f,w=r*d-s*f,C=a*d-s*c,O=i*_-o*v,D=i*p-h*v,k=i*m-u*v,j=o*p-h*_,F=o*m-u*_,q=h*m-u*p,I=g*q-M*F+b*j+A*k-w*D+C*O;return I?(I=1/I,e[0]=(f*q-c*F+d*j)*I,e[1]=(c*k-l*q-d*D)*I,e[2]=(l*F-f*k+d*O)*I,e[3]=(a*F-r*q-s*j)*I,e[4]=(n*q-a*k+s*D)*I,e[5]=(r*k-n*F-s*O)*I,e[6]=(_*C-p*w+m*A)*I,e[7]=(p*b-v*C-m*M)*I,e[8]=(v*w-_*b+m*g)*I,e):null}function ti(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function ni(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function ri(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function ii(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function tt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function ai(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function si(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function oi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function li(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=e[4],f=e[5],c=e[6],d=e[7],i=e[8],o=t[0],h=t[1],u=t[2],v=t[3],_=t[4],p=t[5],m=t[6],g=t[7],M=t[8];return Math.abs(n-o)<=X.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-h)<=X.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(a-u)<=X.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(s-v)<=X.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(l-_)<=X.EPSILON*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(f-p)<=X.EPSILON*Math.max(1,Math.abs(f),Math.abs(p))&&Math.abs(c-m)<=X.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(d-g)<=X.EPSILON*Math.max(1,Math.abs(d),Math.abs(g))&&Math.abs(i-M)<=X.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))}var ci=et;E.mul=ci;var fi=tt;E.sub=fi});var Ie=Y(L=>{"use strict";function ye(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ye=function(n){return typeof n}:ye=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ye(e)}Object.defineProperty(L,"__esModule",{value:!0});L.create=di;L.clone=ui;L.copy=pi;L.fromValues=vi;L.set=_i;L.identity=rt;L.transpose=mi;L.invert=yi;L.adjoint=gi;L.determinant=Mi;L.multiply=it;L.translate=bi;L.scale=Ai;L.rotate=wi;L.rotateX=xi;L.rotateY=Ti;L.rotateZ=Li;L.fromTranslation=Si;L.fromScaling=Oi;L.fromRotation=Ri;L.fromXRotation=Pi;L.fromYRotation=Ii;L.fromZRotation=Wi;L.fromRotationTranslation=at;L.fromQuat2=Ei;L.getTranslation=Ci;L.getScaling=st;L.getRotation=qi;L.fromRotationTranslationScale=ki;L.fromRotationTranslationScaleOrigin=Di;L.fromQuat=Fi;L.frustum=zi;L.perspectiveNO=ot;L.perspectiveZO=ji;L.perspectiveFromFieldOfView=Hi;L.orthoNO=lt;L.orthoZO=Ni;L.lookAt=Bi;L.targetTo=Xi;L.str=Qi;L.frob=Gi;L.add=Ui;L.subtract=ct;L.multiplyScalar=Zi;L.multiplyScalarAndAdd=$i;L.exactEquals=Ji;L.equals=Ki;L.sub=L.mul=L.ortho=L.perspective=void 0;var H=hi($());function nt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(nt=function(a){return a?n:t})(e)}function hi(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ye(e)!=="object"&&typeof e!="function")return{default:e};var n=nt(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function di(){var e=new H.ARRAY_TYPE(16);return H.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ui(e){var t=new H.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function pi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function vi(e,t,n,r,a,s,l,f,c,d,i,o,h,u,v,_){var p=new H.ARRAY_TYPE(16);return p[0]=e,p[1]=t,p[2]=n,p[3]=r,p[4]=a,p[5]=s,p[6]=l,p[7]=f,p[8]=c,p[9]=d,p[10]=i,p[11]=o,p[12]=h,p[13]=u,p[14]=v,p[15]=_,p}function _i(e,t,n,r,a,s,l,f,c,d,i,o,h,u,v,_,p){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e[6]=f,e[7]=c,e[8]=d,e[9]=i,e[10]=o,e[11]=h,e[12]=u,e[13]=v,e[14]=_,e[15]=p,e}function rt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mi(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],s=t[6],l=t[7],f=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=s,e[11]=t[14],e[12]=a,e[13]=l,e[14]=f}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function yi(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=t[6],d=t[7],i=t[8],o=t[9],h=t[10],u=t[11],v=t[12],_=t[13],p=t[14],m=t[15],g=n*f-r*l,M=n*c-a*l,b=n*d-s*l,A=r*c-a*f,w=r*d-s*f,C=a*d-s*c,O=i*_-o*v,D=i*p-h*v,k=i*m-u*v,j=o*p-h*_,F=o*m-u*_,q=h*m-u*p,I=g*q-M*F+b*j+A*k-w*D+C*O;return I?(I=1/I,e[0]=(f*q-c*F+d*j)*I,e[1]=(a*F-r*q-s*j)*I,e[2]=(_*C-p*w+m*A)*I,e[3]=(h*w-o*C-u*A)*I,e[4]=(c*k-l*q-d*D)*I,e[5]=(n*q-a*k+s*D)*I,e[6]=(p*b-v*C-m*M)*I,e[7]=(i*C-h*b+u*M)*I,e[8]=(l*F-f*k+d*O)*I,e[9]=(r*k-n*F-s*O)*I,e[10]=(v*w-_*b+m*g)*I,e[11]=(o*b-i*w-u*g)*I,e[12]=(f*D-l*j-c*O)*I,e[13]=(n*j-r*D+a*O)*I,e[14]=(_*M-v*A-p*g)*I,e[15]=(i*A-o*M+h*g)*I,e):null}function gi(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=t[4],f=t[5],c=t[6],d=t[7],i=t[8],o=t[9],h=t[10],u=t[11],v=t[12],_=t[13],p=t[14],m=t[15];return e[0]=f*(h*m-u*p)-o*(c*m-d*p)+_*(c*u-d*h),e[1]=-(r*(h*m-u*p)-o*(a*m-s*p)+_*(a*u-s*h)),e[2]=r*(c*m-d*p)-f*(a*m-s*p)+_*(a*d-s*c),e[3]=-(r*(c*u-d*h)-f*(a*u-s*h)+o*(a*d-s*c)),e[4]=-(l*(h*m-u*p)-i*(c*m-d*p)+v*(c*u-d*h)),e[5]=n*(h*m-u*p)-i*(a*m-s*p)+v*(a*u-s*h),e[6]=-(n*(c*m-d*p)-l*(a*m-s*p)+v*(a*d-s*c)),e[7]=n*(c*u-d*h)-l*(a*u-s*h)+i*(a*d-s*c),e[8]=l*(o*m-u*_)-i*(f*m-d*_)+v*(f*u-d*o),e[9]=-(n*(o*m-u*_)-i*(r*m-s*_)+v*(r*u-s*o)),e[10]=n*(f*m-d*_)-l*(r*m-s*_)+v*(r*d-s*f),e[11]=-(n*(f*u-d*o)-l*(r*u-s*o)+i*(r*d-s*f)),e[12]=-(l*(o*p-h*_)-i*(f*p-c*_)+v*(f*h-c*o)),e[13]=n*(o*p-h*_)-i*(r*p-a*_)+v*(r*h-a*o),e[14]=-(n*(f*p-c*_)-l*(r*p-a*_)+v*(r*c-a*f)),e[15]=n*(f*h-c*o)-l*(r*h-a*o)+i*(r*c-a*f),e}function Mi(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],l=e[5],f=e[6],c=e[7],d=e[8],i=e[9],o=e[10],h=e[11],u=e[12],v=e[13],_=e[14],p=e[15],m=t*l-n*s,g=t*f-r*s,M=t*c-a*s,b=n*f-r*l,A=n*c-a*l,w=r*c-a*f,C=d*v-i*u,O=d*_-o*u,D=d*p-h*u,k=i*_-o*v,j=i*p-h*v,F=o*p-h*_;return m*F-g*j+M*k+b*D-A*O+w*C}function it(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=t[8],h=t[9],u=t[10],v=t[11],_=t[12],p=t[13],m=t[14],g=t[15],M=n[0],b=n[1],A=n[2],w=n[3];return e[0]=M*r+b*f+A*o+w*_,e[1]=M*a+b*c+A*h+w*p,e[2]=M*s+b*d+A*u+w*m,e[3]=M*l+b*i+A*v+w*g,M=n[4],b=n[5],A=n[6],w=n[7],e[4]=M*r+b*f+A*o+w*_,e[5]=M*a+b*c+A*h+w*p,e[6]=M*s+b*d+A*u+w*m,e[7]=M*l+b*i+A*v+w*g,M=n[8],b=n[9],A=n[10],w=n[11],e[8]=M*r+b*f+A*o+w*_,e[9]=M*a+b*c+A*h+w*p,e[10]=M*s+b*d+A*u+w*m,e[11]=M*l+b*i+A*v+w*g,M=n[12],b=n[13],A=n[14],w=n[15],e[12]=M*r+b*f+A*o+w*_,e[13]=M*a+b*c+A*h+w*p,e[14]=M*s+b*d+A*u+w*m,e[15]=M*l+b*i+A*v+w*g,e}function bi(e,t,n){var r=n[0],a=n[1],s=n[2],l,f,c,d,i,o,h,u,v,_,p,m;return t===e?(e[12]=t[0]*r+t[4]*a+t[8]*s+t[12],e[13]=t[1]*r+t[5]*a+t[9]*s+t[13],e[14]=t[2]*r+t[6]*a+t[10]*s+t[14],e[15]=t[3]*r+t[7]*a+t[11]*s+t[15]):(l=t[0],f=t[1],c=t[2],d=t[3],i=t[4],o=t[5],h=t[6],u=t[7],v=t[8],_=t[9],p=t[10],m=t[11],e[0]=l,e[1]=f,e[2]=c,e[3]=d,e[4]=i,e[5]=o,e[6]=h,e[7]=u,e[8]=v,e[9]=_,e[10]=p,e[11]=m,e[12]=l*r+i*a+v*s+t[12],e[13]=f*r+o*a+_*s+t[13],e[14]=c*r+h*a+p*s+t[14],e[15]=d*r+u*a+m*s+t[15]),e}function Ai(e,t,n){var r=n[0],a=n[1],s=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function wi(e,t,n,r){var a=r[0],s=r[1],l=r[2],f=Math.hypot(a,s,l),c,d,i,o,h,u,v,_,p,m,g,M,b,A,w,C,O,D,k,j,F,q,I,Z;return f<H.EPSILON?null:(f=1/f,a*=f,s*=f,l*=f,c=Math.sin(n),d=Math.cos(n),i=1-d,o=t[0],h=t[1],u=t[2],v=t[3],_=t[4],p=t[5],m=t[6],g=t[7],M=t[8],b=t[9],A=t[10],w=t[11],C=a*a*i+d,O=s*a*i+l*c,D=l*a*i-s*c,k=a*s*i-l*c,j=s*s*i+d,F=l*s*i+a*c,q=a*l*i+s*c,I=s*l*i-a*c,Z=l*l*i+d,e[0]=o*C+_*O+M*D,e[1]=h*C+p*O+b*D,e[2]=u*C+m*O+A*D,e[3]=v*C+g*O+w*D,e[4]=o*k+_*j+M*F,e[5]=h*k+p*j+b*F,e[6]=u*k+m*j+A*F,e[7]=v*k+g*j+w*F,e[8]=o*q+_*I+M*Z,e[9]=h*q+p*I+b*Z,e[10]=u*q+m*I+A*Z,e[11]=v*q+g*I+w*Z,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function xi(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[4],l=t[5],f=t[6],c=t[7],d=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*a+d*r,e[5]=l*a+i*r,e[6]=f*a+o*r,e[7]=c*a+h*r,e[8]=d*a-s*r,e[9]=i*a-l*r,e[10]=o*a-f*r,e[11]=h*a-c*r,e}function Ti(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[0],l=t[1],f=t[2],c=t[3],d=t[8],i=t[9],o=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a-d*r,e[1]=l*a-i*r,e[2]=f*a-o*r,e[3]=c*a-h*r,e[8]=s*r+d*a,e[9]=l*r+i*a,e[10]=f*r+o*a,e[11]=c*r+h*a,e}function Li(e,t,n){var r=Math.sin(n),a=Math.cos(n),s=t[0],l=t[1],f=t[2],c=t[3],d=t[4],i=t[5],o=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*a+d*r,e[1]=l*a+i*r,e[2]=f*a+o*r,e[3]=c*a+h*r,e[4]=d*a-s*r,e[5]=i*a-l*r,e[6]=o*a-f*r,e[7]=h*a-c*r,e}function Si(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Oi(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ri(e,t,n){var r=n[0],a=n[1],s=n[2],l=Math.hypot(r,a,s),f,c,d;return l<H.EPSILON?null:(l=1/l,r*=l,a*=l,s*=l,f=Math.sin(t),c=Math.cos(t),d=1-c,e[0]=r*r*d+c,e[1]=a*r*d+s*f,e[2]=s*r*d-a*f,e[3]=0,e[4]=r*a*d-s*f,e[5]=a*a*d+c,e[6]=s*a*d+r*f,e[7]=0,e[8]=r*s*d+a*f,e[9]=a*s*d-r*f,e[10]=s*s*d+c,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Pi(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ii(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Wi(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function at(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=r+r,c=a+a,d=s+s,i=r*f,o=r*c,h=r*d,u=a*c,v=a*d,_=s*d,p=l*f,m=l*c,g=l*d;return e[0]=1-(u+_),e[1]=o+g,e[2]=h-m,e[3]=0,e[4]=o-g,e[5]=1-(i+_),e[6]=v+p,e[7]=0,e[8]=h+m,e[9]=v-p,e[10]=1-(i+u),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Ei(e,t){var n=new H.ARRAY_TYPE(3),r=-t[0],a=-t[1],s=-t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=r*r+a*a+s*s+l*l;return o>0?(n[0]=(f*l+i*r+c*s-d*a)*2/o,n[1]=(c*l+i*a+d*r-f*s)*2/o,n[2]=(d*l+i*s+f*a-c*r)*2/o):(n[0]=(f*l+i*r+c*s-d*a)*2,n[1]=(c*l+i*a+d*r-f*s)*2,n[2]=(d*l+i*s+f*a-c*r)*2),at(e,t,n),e}function Ci(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function st(e,t){var n=t[0],r=t[1],a=t[2],s=t[4],l=t[5],f=t[6],c=t[8],d=t[9],i=t[10];return e[0]=Math.hypot(n,r,a),e[1]=Math.hypot(s,l,f),e[2]=Math.hypot(c,d,i),e}function qi(e,t){var n=new H.ARRAY_TYPE(3);st(n,t);var r=1/n[0],a=1/n[1],s=1/n[2],l=t[0]*r,f=t[1]*a,c=t[2]*s,d=t[4]*r,i=t[5]*a,o=t[6]*s,h=t[8]*r,u=t[9]*a,v=t[10]*s,_=l+i+v,p=0;return _>0?(p=Math.sqrt(_+1)*2,e[3]=.25*p,e[0]=(o-u)/p,e[1]=(h-c)/p,e[2]=(f-d)/p):l>i&&l>v?(p=Math.sqrt(1+l-i-v)*2,e[3]=(o-u)/p,e[0]=.25*p,e[1]=(f+d)/p,e[2]=(h+c)/p):i>v?(p=Math.sqrt(1+i-l-v)*2,e[3]=(h-c)/p,e[0]=(f+d)/p,e[1]=.25*p,e[2]=(o+u)/p):(p=Math.sqrt(1+v-l-i)*2,e[3]=(f-d)/p,e[0]=(h+c)/p,e[1]=(o+u)/p,e[2]=.25*p),e}function ki(e,t,n,r){var a=t[0],s=t[1],l=t[2],f=t[3],c=a+a,d=s+s,i=l+l,o=a*c,h=a*d,u=a*i,v=s*d,_=s*i,p=l*i,m=f*c,g=f*d,M=f*i,b=r[0],A=r[1],w=r[2];return e[0]=(1-(v+p))*b,e[1]=(h+M)*b,e[2]=(u-g)*b,e[3]=0,e[4]=(h-M)*A,e[5]=(1-(o+p))*A,e[6]=(_+m)*A,e[7]=0,e[8]=(u+g)*w,e[9]=(_-m)*w,e[10]=(1-(o+v))*w,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Di(e,t,n,r,a){var s=t[0],l=t[1],f=t[2],c=t[3],d=s+s,i=l+l,o=f+f,h=s*d,u=s*i,v=s*o,_=l*i,p=l*o,m=f*o,g=c*d,M=c*i,b=c*o,A=r[0],w=r[1],C=r[2],O=a[0],D=a[1],k=a[2],j=(1-(_+m))*A,F=(u+b)*A,q=(v-M)*A,I=(u-b)*w,Z=(1-(h+m))*w,ue=(p+g)*w,pe=(v+M)*C,Ve=(p-g)*C,je=(1-(h+_))*C;return e[0]=j,e[1]=F,e[2]=q,e[3]=0,e[4]=I,e[5]=Z,e[6]=ue,e[7]=0,e[8]=pe,e[9]=Ve,e[10]=je,e[11]=0,e[12]=n[0]+O-(j*O+I*D+pe*k),e[13]=n[1]+D-(F*O+Z*D+Ve*k),e[14]=n[2]+k-(q*O+ue*D+je*k),e[15]=1,e}function Fi(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=n+n,f=r+r,c=a+a,d=n*l,i=r*l,o=r*f,h=a*l,u=a*f,v=a*c,_=s*l,p=s*f,m=s*c;return e[0]=1-o-v,e[1]=i+m,e[2]=h-p,e[3]=0,e[4]=i-m,e[5]=1-d-v,e[6]=u+_,e[7]=0,e[8]=h+p,e[9]=u-_,e[10]=1-d-o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function zi(e,t,n,r,a,s,l){var f=1/(n-t),c=1/(a-r),d=1/(s-l);return e[0]=s*2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s*2*c,e[6]=0,e[7]=0,e[8]=(n+t)*f,e[9]=(a+r)*c,e[10]=(l+s)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=l*s*2*d,e[15]=0,e}function ot(e,t,n,r,a){var s=1/Math.tan(t/2),l;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(l=1/(r-a),e[10]=(a+r)*l,e[14]=2*a*r*l):(e[10]=-1,e[14]=-2*r),e}var Vi=ot;L.perspective=Vi;function ji(e,t,n,r,a){var s=1/Math.tan(t/2),l;return e[0]=s/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(l=1/(r-a),e[10]=a*l,e[14]=a*r*l):(e[10]=-1,e[14]=-r),e}function Hi(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),l=Math.tan(t.leftDegrees*Math.PI/180),f=Math.tan(t.rightDegrees*Math.PI/180),c=2/(l+f),d=2/(a+s);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=-((l-f)*c*.5),e[9]=(a-s)*d*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function lt(e,t,n,r,a,s,l){var f=1/(t-n),c=1/(r-a),d=1/(s-l);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+n)*f,e[13]=(a+r)*c,e[14]=(l+s)*d,e[15]=1,e}var Yi=lt;L.ortho=Yi;function Ni(e,t,n,r,a,s,l){var f=1/(t-n),c=1/(r-a),d=1/(s-l);return e[0]=-2*f,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=d,e[11]=0,e[12]=(t+n)*f,e[13]=(a+r)*c,e[14]=s*d,e[15]=1,e}function Bi(e,t,n,r){var a,s,l,f,c,d,i,o,h,u,v=t[0],_=t[1],p=t[2],m=r[0],g=r[1],M=r[2],b=n[0],A=n[1],w=n[2];return Math.abs(v-b)<H.EPSILON&&Math.abs(_-A)<H.EPSILON&&Math.abs(p-w)<H.EPSILON?rt(e):(i=v-b,o=_-A,h=p-w,u=1/Math.hypot(i,o,h),i*=u,o*=u,h*=u,a=g*h-M*o,s=M*i-m*h,l=m*o-g*i,u=Math.hypot(a,s,l),u?(u=1/u,a*=u,s*=u,l*=u):(a=0,s=0,l=0),f=o*l-h*s,c=h*a-i*l,d=i*s-o*a,u=Math.hypot(f,c,d),u?(u=1/u,f*=u,c*=u,d*=u):(f=0,c=0,d=0),e[0]=a,e[1]=f,e[2]=i,e[3]=0,e[4]=s,e[5]=c,e[6]=o,e[7]=0,e[8]=l,e[9]=d,e[10]=h,e[11]=0,e[12]=-(a*v+s*_+l*p),e[13]=-(f*v+c*_+d*p),e[14]=-(i*v+o*_+h*p),e[15]=1,e)}function Xi(e,t,n,r){var a=t[0],s=t[1],l=t[2],f=r[0],c=r[1],d=r[2],i=a-n[0],o=s-n[1],h=l-n[2],u=i*i+o*o+h*h;u>0&&(u=1/Math.sqrt(u),i*=u,o*=u,h*=u);var v=c*h-d*o,_=d*i-f*h,p=f*o-c*i;return u=v*v+_*_+p*p,u>0&&(u=1/Math.sqrt(u),v*=u,_*=u,p*=u),e[0]=v,e[1]=_,e[2]=p,e[3]=0,e[4]=o*p-h*_,e[5]=h*v-i*p,e[6]=i*_-o*v,e[7]=0,e[8]=i,e[9]=o,e[10]=h,e[11]=0,e[12]=a,e[13]=s,e[14]=l,e[15]=1,e}function Qi(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Gi(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ui(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function ct(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Zi(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function $i(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Ji(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ki(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=e[4],f=e[5],c=e[6],d=e[7],i=e[8],o=e[9],h=e[10],u=e[11],v=e[12],_=e[13],p=e[14],m=e[15],g=t[0],M=t[1],b=t[2],A=t[3],w=t[4],C=t[5],O=t[6],D=t[7],k=t[8],j=t[9],F=t[10],q=t[11],I=t[12],Z=t[13],ue=t[14],pe=t[15];return Math.abs(n-g)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(r-M)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(a-b)<=H.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))&&Math.abs(s-A)<=H.EPSILON*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(l-w)<=H.EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(f-C)<=H.EPSILON*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(c-O)<=H.EPSILON*Math.max(1,Math.abs(c),Math.abs(O))&&Math.abs(d-D)<=H.EPSILON*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(i-k)<=H.EPSILON*Math.max(1,Math.abs(i),Math.abs(k))&&Math.abs(o-j)<=H.EPSILON*Math.max(1,Math.abs(o),Math.abs(j))&&Math.abs(h-F)<=H.EPSILON*Math.max(1,Math.abs(h),Math.abs(F))&&Math.abs(u-q)<=H.EPSILON*Math.max(1,Math.abs(u),Math.abs(q))&&Math.abs(v-I)<=H.EPSILON*Math.max(1,Math.abs(v),Math.abs(I))&&Math.abs(_-Z)<=H.EPSILON*Math.max(1,Math.abs(_),Math.abs(Z))&&Math.abs(p-ue)<=H.EPSILON*Math.max(1,Math.abs(p),Math.abs(ue))&&Math.abs(m-pe)<=H.EPSILON*Math.max(1,Math.abs(m),Math.abs(pe))}var ea=it;L.mul=ea;var ta=ct;L.sub=ta});var We=Y(T=>{"use strict";function ge(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ge=function(n){return typeof n}:ge=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ge(e)}Object.defineProperty(T,"__esModule",{value:!0});T.create=ht;T.clone=ra;T.length=dt;T.fromValues=ia;T.copy=aa;T.set=sa;T.add=oa;T.subtract=ut;T.multiply=pt;T.divide=vt;T.ceil=la;T.floor=ca;T.min=fa;T.max=ha;T.round=da;T.scale=ua;T.scaleAndAdd=pa;T.distance=_t;T.squaredDistance=mt;T.squaredLength=yt;T.negate=va;T.inverse=_a;T.normalize=ma;T.dot=gt;T.cross=ya;T.lerp=ga;T.hermite=Ma;T.bezier=ba;T.random=Aa;T.transformMat4=wa;T.transformMat3=xa;T.transformQuat=Ta;T.rotateX=La;T.rotateY=Sa;T.rotateZ=Oa;T.angle=Ra;T.zero=Pa;T.str=Ia;T.exactEquals=Wa;T.equals=Ea;T.forEach=T.sqrLen=T.len=T.sqrDist=T.dist=T.div=T.mul=T.sub=void 0;var ie=na($());function ft(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(ft=function(a){return a?n:t})(e)}function na(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||ge(e)!=="object"&&typeof e!="function")return{default:e};var n=ft(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function ht(){var e=new ie.ARRAY_TYPE(3);return ie.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ra(e){var t=new ie.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function dt(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function ia(e,t,n){var r=new ie.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function aa(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function sa(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function oa(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function ut(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function pt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function vt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function la(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ca(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function fa(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function ha(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function da(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function ua(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function pa(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function _t(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function mt(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function yt(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function va(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function _a(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ma(e,t){var n=t[0],r=t[1],a=t[2],s=n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ya(e,t,n){var r=t[0],a=t[1],s=t[2],l=n[0],f=n[1],c=n[2];return e[0]=a*c-s*f,e[1]=s*l-r*c,e[2]=r*f-a*l,e}function ga(e,t,n,r){var a=t[0],s=t[1],l=t[2];return e[0]=a+r*(n[0]-a),e[1]=s+r*(n[1]-s),e[2]=l+r*(n[2]-l),e}function Ma(e,t,n,r,a,s){var l=s*s,f=l*(2*s-3)+1,c=l*(s-2)+s,d=l*(s-1),i=l*(3-2*s);return e[0]=t[0]*f+n[0]*c+r[0]*d+a[0]*i,e[1]=t[1]*f+n[1]*c+r[1]*d+a[1]*i,e[2]=t[2]*f+n[2]*c+r[2]*d+a[2]*i,e}function ba(e,t,n,r,a,s){var l=1-s,f=l*l,c=s*s,d=f*l,i=3*s*f,o=3*c*l,h=c*s;return e[0]=t[0]*d+n[0]*i+r[0]*o+a[0]*h,e[1]=t[1]*d+n[1]*i+r[1]*o+a[1]*h,e[2]=t[2]*d+n[2]*i+r[2]*o+a[2]*h,e}function Aa(e,t){t=t||1;var n=ie.RANDOM()*2*Math.PI,r=ie.RANDOM()*2-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function wa(e,t,n){var r=t[0],a=t[1],s=t[2],l=n[3]*r+n[7]*a+n[11]*s+n[15];return l=l||1,e[0]=(n[0]*r+n[4]*a+n[8]*s+n[12])/l,e[1]=(n[1]*r+n[5]*a+n[9]*s+n[13])/l,e[2]=(n[2]*r+n[6]*a+n[10]*s+n[14])/l,e}function xa(e,t,n){var r=t[0],a=t[1],s=t[2];return e[0]=r*n[0]+a*n[3]+s*n[6],e[1]=r*n[1]+a*n[4]+s*n[7],e[2]=r*n[2]+a*n[5]+s*n[8],e}function Ta(e,t,n){var r=n[0],a=n[1],s=n[2],l=n[3],f=t[0],c=t[1],d=t[2],i=a*d-s*c,o=s*f-r*d,h=r*c-a*f,u=a*h-s*o,v=s*i-r*h,_=r*o-a*i,p=l*2;return i*=p,o*=p,h*=p,u*=2,v*=2,_*=2,e[0]=f+i+u,e[1]=c+o+v,e[2]=d+h+_,e}function La(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[0],s[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),s[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Sa(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),s[1]=a[1],s[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Oa(e,t,n,r){var a=[],s=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],s[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),s[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),s[2]=a[2],e[0]=s[0]+n[0],e[1]=s[1]+n[1],e[2]=s[2]+n[2],e}function Ra(e,t){var n=e[0],r=e[1],a=e[2],s=t[0],l=t[1],f=t[2],c=Math.sqrt(n*n+r*r+a*a),d=Math.sqrt(s*s+l*l+f*f),i=c*d,o=i&&gt(e,t)/i;return Math.acos(Math.min(Math.max(o,-1),1))}function Pa(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ia(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Wa(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Ea(e,t){var n=e[0],r=e[1],a=e[2],s=t[0],l=t[1],f=t[2];return Math.abs(n-s)<=ie.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-l)<=ie.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-f)<=ie.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))}var Ca=ut;T.sub=Ca;var qa=pt;T.mul=qa;var ka=vt;T.div=ka;var Da=_t;T.dist=Da;var Fa=mt;T.sqrDist=Fa;var za=dt;T.len=za;var Va=yt;T.sqrLen=Va;var ja=function(){var e=ht();return function(t,n,r,a,s,l){var f,c;for(n||(n=3),r||(r=0),a?c=Math.min(a*n+r,t.length):c=t.length,f=r;f<c;f+=n)e[0]=t[f],e[1]=t[f+1],e[2]=t[f+2],s(e,e,l),t[f]=e[0],t[f+1]=e[1],t[f+2]=e[2];return t}}();T.forEach=ja});var Ee=Y(R=>{"use strict";function Me(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Me=function(n){return typeof n}:Me=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Me(e)}Object.defineProperty(R,"__esModule",{value:!0});R.create=bt;R.clone=Ya;R.fromValues=Na;R.copy=Ba;R.set=Xa;R.add=Qa;R.subtract=At;R.multiply=wt;R.divide=xt;R.ceil=Ga;R.floor=Ua;R.min=Za;R.max=$a;R.round=Ja;R.scale=Ka;R.scaleAndAdd=es;R.distance=Tt;R.squaredDistance=Lt;R.length=St;R.squaredLength=Ot;R.negate=ts;R.inverse=ns;R.normalize=rs;R.dot=is;R.cross=as;R.lerp=ss;R.random=os;R.transformMat4=ls;R.transformQuat=cs;R.zero=fs;R.str=hs;R.exactEquals=ds;R.equals=us;R.forEach=R.sqrLen=R.len=R.sqrDist=R.dist=R.div=R.mul=R.sub=void 0;var U=Ha($());function Mt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Mt=function(a){return a?n:t})(e)}function Ha(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Me(e)!=="object"&&typeof e!="function")return{default:e};var n=Mt(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function bt(){var e=new U.ARRAY_TYPE(4);return U.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Ya(e){var t=new U.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Na(e,t,n,r){var a=new U.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function Ba(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Xa(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function Qa(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function At(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function wt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function xt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Ga(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Ua(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Za(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function $a(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Ja(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Ka(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function es(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function Tt(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return Math.hypot(n,r,a,s)}function Lt(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],s=t[3]-e[3];return n*n+r*r+a*a+s*s}function St(e){var t=e[0],n=e[1],r=e[2],a=e[3];return Math.hypot(t,n,r,a)}function Ot(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a}function ts(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ns(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function rs(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=n*n+r*r+a*a+s*s;return l>0&&(l=1/Math.sqrt(l)),e[0]=n*l,e[1]=r*l,e[2]=a*l,e[3]=s*l,e}function is(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function as(e,t,n,r){var a=n[0]*r[1]-n[1]*r[0],s=n[0]*r[2]-n[2]*r[0],l=n[0]*r[3]-n[3]*r[0],f=n[1]*r[2]-n[2]*r[1],c=n[1]*r[3]-n[3]*r[1],d=n[2]*r[3]-n[3]*r[2],i=t[0],o=t[1],h=t[2],u=t[3];return e[0]=o*d-h*c+u*f,e[1]=-(i*d)+h*l-u*s,e[2]=i*c-o*l+u*a,e[3]=-(i*f)+o*s-h*a,e}function ss(e,t,n,r){var a=t[0],s=t[1],l=t[2],f=t[3];return e[0]=a+r*(n[0]-a),e[1]=s+r*(n[1]-s),e[2]=l+r*(n[2]-l),e[3]=f+r*(n[3]-f),e}function os(e,t){t=t||1;var n,r,a,s,l,f;do n=U.RANDOM()*2-1,r=U.RANDOM()*2-1,l=n*n+r*r;while(l>=1);do a=U.RANDOM()*2-1,s=U.RANDOM()*2-1,f=a*a+s*s;while(f>=1);var c=Math.sqrt((1-l)/f);return e[0]=t*n,e[1]=t*r,e[2]=t*a*c,e[3]=t*s*c,e}function ls(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*s+n[12]*l,e[1]=n[1]*r+n[5]*a+n[9]*s+n[13]*l,e[2]=n[2]*r+n[6]*a+n[10]*s+n[14]*l,e[3]=n[3]*r+n[7]*a+n[11]*s+n[15]*l,e}function cs(e,t,n){var r=t[0],a=t[1],s=t[2],l=n[0],f=n[1],c=n[2],d=n[3],i=d*r+f*s-c*a,o=d*a+c*r-l*s,h=d*s+l*a-f*r,u=-l*r-f*a-c*s;return e[0]=i*d+u*-l+o*-c-h*-f,e[1]=o*d+u*-f+h*-l-i*-c,e[2]=h*d+u*-c+i*-f-o*-l,e[3]=t[3],e}function fs(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function hs(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function ds(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function us(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=t[0],f=t[1],c=t[2],d=t[3];return Math.abs(n-l)<=U.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-f)<=U.EPSILON*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(a-c)<=U.EPSILON*Math.max(1,Math.abs(a),Math.abs(c))&&Math.abs(s-d)<=U.EPSILON*Math.max(1,Math.abs(s),Math.abs(d))}var ps=At;R.sub=ps;var vs=wt;R.mul=vs;var _s=xt;R.div=_s;var ms=Tt;R.dist=ms;var ys=Lt;R.sqrDist=ys;var gs=St;R.len=gs;var Ms=Ot;R.sqrLen=Ms;var bs=function(){var e=bt();return function(t,n,r,a,s,l){var f,c;for(n||(n=4),r||(r=0),a?c=Math.min(a*n+r,t.length):c=t.length,f=r;f<c;f+=n)e[0]=t[f],e[1]=t[f+1],e[2]=t[f+2],e[3]=t[f+3],s(e,e,l),t[f]=e[0],t[f+1]=e[1],t[f+2]=e[2],t[f+3]=e[3];return t}}();R.forEach=bs});var ke=Y(x=>{"use strict";function be(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?be=function(n){return typeof n}:be=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},be(e)}Object.defineProperty(x,"__esModule",{value:!0});x.create=Ce;x.identity=ws;x.setAxisAngle=Pt;x.getAxisAngle=xs;x.getAngle=Ts;x.multiply=It;x.rotateX=Ls;x.rotateY=Ss;x.rotateZ=Os;x.calculateW=Rs;x.exp=Wt;x.ln=Et;x.pow=Ps;x.slerp=Ae;x.random=Is;x.invert=Ws;x.conjugate=Es;x.fromMat3=Ct;x.fromEuler=Cs;x.str=qs;x.setAxes=x.sqlerp=x.rotationTo=x.equals=x.exactEquals=x.normalize=x.sqrLen=x.squaredLength=x.len=x.length=x.lerp=x.dot=x.scale=x.mul=x.add=x.set=x.copy=x.fromValues=x.clone=void 0;var fe=we($()),As=we(Pe()),ae=we(We()),Q=we(Ee());function Rt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Rt=function(a){return a?n:t})(e)}function we(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||be(e)!=="object"&&typeof e!="function")return{default:e};var n=Rt(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function Ce(){var e=new fe.ARRAY_TYPE(4);return fe.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ws(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Pt(e,t,n){n=n*.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function xs(e,t){var n=Math.acos(t[3])*2,r=Math.sin(n/2);return r>fe.EPSILON?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Ts(e,t){var n=kt(e,t);return Math.acos(2*n*n-1)}function It(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[0],c=n[1],d=n[2],i=n[3];return e[0]=r*i+l*f+a*d-s*c,e[1]=a*i+l*c+s*f-r*d,e[2]=s*i+l*d+r*c-a*f,e[3]=l*i-r*f-a*c-s*d,e}function Ls(e,t,n){n*=.5;var r=t[0],a=t[1],s=t[2],l=t[3],f=Math.sin(n),c=Math.cos(n);return e[0]=r*c+l*f,e[1]=a*c+s*f,e[2]=s*c-a*f,e[3]=l*c-r*f,e}function Ss(e,t,n){n*=.5;var r=t[0],a=t[1],s=t[2],l=t[3],f=Math.sin(n),c=Math.cos(n);return e[0]=r*c-s*f,e[1]=a*c+l*f,e[2]=s*c+r*f,e[3]=l*c-a*f,e}function Os(e,t,n){n*=.5;var r=t[0],a=t[1],s=t[2],l=t[3],f=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*f,e[1]=a*c-r*f,e[2]=s*c+l*f,e[3]=l*c-s*f,e}function Rs(e,t){var n=t[0],r=t[1],a=t[2];return e[0]=n,e[1]=r,e[2]=a,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),e}function Wt(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=Math.sqrt(n*n+r*r+a*a),f=Math.exp(s),c=l>0?f*Math.sin(l)/l:0;return e[0]=n*c,e[1]=r*c,e[2]=a*c,e[3]=f*Math.cos(l),e}function Et(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=Math.sqrt(n*n+r*r+a*a),f=l>0?Math.atan2(l,s)/l:0;return e[0]=n*f,e[1]=r*f,e[2]=a*f,e[3]=.5*Math.log(n*n+r*r+a*a+s*s),e}function Ps(e,t,n){return Et(e,t),qt(e,e,n),Wt(e,e),e}function Ae(e,t,n,r){var a=t[0],s=t[1],l=t[2],f=t[3],c=n[0],d=n[1],i=n[2],o=n[3],h,u,v,_,p;return u=a*c+s*d+l*i+f*o,u<0&&(u=-u,c=-c,d=-d,i=-i,o=-o),1-u>fe.EPSILON?(h=Math.acos(u),v=Math.sin(h),_=Math.sin((1-r)*h)/v,p=Math.sin(r*h)/v):(_=1-r,p=r),e[0]=_*a+p*c,e[1]=_*s+p*d,e[2]=_*l+p*i,e[3]=_*f+p*o,e}function Is(e){var t=fe.RANDOM(),n=fe.RANDOM(),r=fe.RANDOM(),a=Math.sqrt(1-t),s=Math.sqrt(t);return e[0]=a*Math.sin(2*Math.PI*n),e[1]=a*Math.cos(2*Math.PI*n),e[2]=s*Math.sin(2*Math.PI*r),e[3]=s*Math.cos(2*Math.PI*r),e}function Ws(e,t){var n=t[0],r=t[1],a=t[2],s=t[3],l=n*n+r*r+a*a+s*s,f=l?1/l:0;return e[0]=-n*f,e[1]=-r*f,e[2]=-a*f,e[3]=s*f,e}function Es(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Ct(e,t){var n=t[0]+t[4]+t[8],r;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[a*3+a]&&(a=2);var s=(a+1)%3,l=(a+2)%3;r=Math.sqrt(t[a*3+a]-t[s*3+s]-t[l*3+l]+1),e[a]=.5*r,r=.5/r,e[3]=(t[s*3+l]-t[l*3+s])*r,e[s]=(t[s*3+a]+t[a*3+s])*r,e[l]=(t[l*3+a]+t[a*3+l])*r}return e}function Cs(e,t,n,r){var a=.5*Math.PI/180;t*=a,n*=a,r*=a;var s=Math.sin(t),l=Math.cos(t),f=Math.sin(n),c=Math.cos(n),d=Math.sin(r),i=Math.cos(r);return e[0]=s*c*i-l*f*d,e[1]=l*f*i+s*c*d,e[2]=l*c*d-s*f*i,e[3]=l*c*i+s*f*d,e}function qs(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var ks=Q.clone;x.clone=ks;var Ds=Q.fromValues;x.fromValues=Ds;var Fs=Q.copy;x.copy=Fs;var zs=Q.set;x.set=zs;var Vs=Q.add;x.add=Vs;var js=It;x.mul=js;var qt=Q.scale;x.scale=qt;var kt=Q.dot;x.dot=kt;var Hs=Q.lerp;x.lerp=Hs;var Dt=Q.length;x.length=Dt;var Ys=Dt;x.len=Ys;var Ft=Q.squaredLength;x.squaredLength=Ft;var Ns=Ft;x.sqrLen=Ns;var qe=Q.normalize;x.normalize=qe;var Bs=Q.exactEquals;x.exactEquals=Bs;var Xs=Q.equals;x.equals=Xs;var Qs=function(){var e=ae.create(),t=ae.fromValues(1,0,0),n=ae.fromValues(0,1,0);return function(r,a,s){var l=ae.dot(a,s);return l<-.999999?(ae.cross(e,t,a),ae.len(e)<1e-6&&ae.cross(e,n,a),ae.normalize(e,e),Pt(r,e,Math.PI),r):l>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(ae.cross(e,a,s),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+l,qe(r,r))}}();x.rotationTo=Qs;var Gs=function(){var e=Ce(),t=Ce();return function(n,r,a,s,l,f){return Ae(e,r,l,f),Ae(t,a,s,f),Ae(n,e,t,2*f*(1-f)),n}}();x.sqlerp=Gs;var Us=function(){var e=As.create();return function(t,n,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],qe(t,Ct(t,e))}}();x.setAxes=Us});var Xt=Y(P=>{"use strict";function xe(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?xe=function(n){return typeof n}:xe=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xe(e)}Object.defineProperty(P,"__esModule",{value:!0});P.create=Zs;P.clone=$s;P.fromValues=Js;P.fromRotationTranslationValues=Ks;P.fromRotationTranslation=jt;P.fromTranslation=eo;P.fromRotation=to;P.fromMat4=no;P.copy=Ht;P.identity=ro;P.set=io;P.getDual=so;P.setDual=lo;P.getTranslation=co;P.translate=fo;P.rotateX=ho;P.rotateY=uo;P.rotateZ=po;P.rotateByQuatAppend=vo;P.rotateByQuatPrepend=_o;P.rotateAroundAxis=mo;P.add=yo;P.multiply=Yt;P.scale=Mo;P.lerp=bo;P.invert=Ao;P.conjugate=wo;P.normalize=Lo;P.str=So;P.exactEquals=Oo;P.equals=Ro;P.sqrLen=P.squaredLength=P.len=P.length=P.dot=P.mul=P.setReal=P.getReal=void 0;var B=De($()),se=De(ke()),zt=De(Ie());function Vt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Vt=function(a){return a?n:t})(e)}function De(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||xe(e)!=="object"&&typeof e!="function")return{default:e};var n=Vt(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function Zs(){var e=new B.ARRAY_TYPE(8);return B.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function $s(e){var t=new B.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function Js(e,t,n,r,a,s,l,f){var c=new B.ARRAY_TYPE(8);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=a,c[5]=s,c[6]=l,c[7]=f,c}function Ks(e,t,n,r,a,s,l){var f=new B.ARRAY_TYPE(8);f[0]=e,f[1]=t,f[2]=n,f[3]=r;var c=a*.5,d=s*.5,i=l*.5;return f[4]=c*r+d*n-i*t,f[5]=d*r+i*e-c*n,f[6]=i*r+c*t-d*e,f[7]=-c*e-d*t-i*n,f}function jt(e,t,n){var r=n[0]*.5,a=n[1]*.5,s=n[2]*.5,l=t[0],f=t[1],c=t[2],d=t[3];return e[0]=l,e[1]=f,e[2]=c,e[3]=d,e[4]=r*d+a*c-s*f,e[5]=a*d+s*l-r*c,e[6]=s*d+r*f-a*l,e[7]=-r*l-a*f-s*c,e}function eo(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0]*.5,e[5]=t[1]*.5,e[6]=t[2]*.5,e[7]=0,e}function to(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function no(e,t){var n=se.create();zt.getRotation(n,t);var r=new B.ARRAY_TYPE(3);return zt.getTranslation(r,t),jt(e,n,r),e}function Ht(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function ro(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function io(e,t,n,r,a,s,l,f,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e[6]=f,e[7]=c,e}var ao=se.copy;P.getReal=ao;function so(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var oo=se.copy;P.setReal=oo;function lo(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function co(e,t){var n=t[4],r=t[5],a=t[6],s=t[7],l=-t[0],f=-t[1],c=-t[2],d=t[3];return e[0]=(n*d+s*l+r*c-a*f)*2,e[1]=(r*d+s*f+a*l-n*c)*2,e[2]=(a*d+s*c+n*f-r*l)*2,e}function fo(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[0]*.5,c=n[1]*.5,d=n[2]*.5,i=t[4],o=t[5],h=t[6],u=t[7];return e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=l*f+a*d-s*c+i,e[5]=l*c+s*f-r*d+o,e[6]=l*d+r*c-a*f+h,e[7]=-r*f-a*c-s*d+u,e}function ho(e,t,n){var r=-t[0],a=-t[1],s=-t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=f*l+i*r+c*s-d*a,h=c*l+i*a+d*r-f*s,u=d*l+i*s+f*a-c*r,v=i*l-f*r-c*a-d*s;return se.rotateX(e,t,n),r=e[0],a=e[1],s=e[2],l=e[3],e[4]=o*l+v*r+h*s-u*a,e[5]=h*l+v*a+u*r-o*s,e[6]=u*l+v*s+o*a-h*r,e[7]=v*l-o*r-h*a-u*s,e}function uo(e,t,n){var r=-t[0],a=-t[1],s=-t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=f*l+i*r+c*s-d*a,h=c*l+i*a+d*r-f*s,u=d*l+i*s+f*a-c*r,v=i*l-f*r-c*a-d*s;return se.rotateY(e,t,n),r=e[0],a=e[1],s=e[2],l=e[3],e[4]=o*l+v*r+h*s-u*a,e[5]=h*l+v*a+u*r-o*s,e[6]=u*l+v*s+o*a-h*r,e[7]=v*l-o*r-h*a-u*s,e}function po(e,t,n){var r=-t[0],a=-t[1],s=-t[2],l=t[3],f=t[4],c=t[5],d=t[6],i=t[7],o=f*l+i*r+c*s-d*a,h=c*l+i*a+d*r-f*s,u=d*l+i*s+f*a-c*r,v=i*l-f*r-c*a-d*s;return se.rotateZ(e,t,n),r=e[0],a=e[1],s=e[2],l=e[3],e[4]=o*l+v*r+h*s-u*a,e[5]=h*l+v*a+u*r-o*s,e[6]=u*l+v*s+o*a-h*r,e[7]=v*l-o*r-h*a-u*s,e}function vo(e,t,n){var r=n[0],a=n[1],s=n[2],l=n[3],f=t[0],c=t[1],d=t[2],i=t[3];return e[0]=f*l+i*r+c*s-d*a,e[1]=c*l+i*a+d*r-f*s,e[2]=d*l+i*s+f*a-c*r,e[3]=i*l-f*r-c*a-d*s,f=t[4],c=t[5],d=t[6],i=t[7],e[4]=f*l+i*r+c*s-d*a,e[5]=c*l+i*a+d*r-f*s,e[6]=d*l+i*s+f*a-c*r,e[7]=i*l-f*r-c*a-d*s,e}function _o(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[0],c=n[1],d=n[2],i=n[3];return e[0]=r*i+l*f+a*d-s*c,e[1]=a*i+l*c+s*f-r*d,e[2]=s*i+l*d+r*c-a*f,e[3]=l*i-r*f-a*c-s*d,f=n[4],c=n[5],d=n[6],i=n[7],e[4]=r*i+l*f+a*d-s*c,e[5]=a*i+l*c+s*f-r*d,e[6]=s*i+l*d+r*c-a*f,e[7]=l*i-r*f-a*c-s*d,e}function mo(e,t,n,r){if(Math.abs(r)<B.EPSILON)return Ht(e,t);var a=Math.hypot(n[0],n[1],n[2]);r=r*.5;var s=Math.sin(r),l=s*n[0]/a,f=s*n[1]/a,c=s*n[2]/a,d=Math.cos(r),i=t[0],o=t[1],h=t[2],u=t[3];e[0]=i*d+u*l+o*c-h*f,e[1]=o*d+u*f+h*l-i*c,e[2]=h*d+u*c+i*f-o*l,e[3]=u*d-i*l-o*f-h*c;var v=t[4],_=t[5],p=t[6],m=t[7];return e[4]=v*d+m*l+_*c-p*f,e[5]=_*d+m*f+p*l-v*c,e[6]=p*d+m*c+v*f-_*l,e[7]=m*d-v*l-_*f-p*c,e}function yo(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Yt(e,t,n){var r=t[0],a=t[1],s=t[2],l=t[3],f=n[4],c=n[5],d=n[6],i=n[7],o=t[4],h=t[5],u=t[6],v=t[7],_=n[0],p=n[1],m=n[2],g=n[3];return e[0]=r*g+l*_+a*m-s*p,e[1]=a*g+l*p+s*_-r*m,e[2]=s*g+l*m+r*p-a*_,e[3]=l*g-r*_-a*p-s*m,e[4]=r*i+l*f+a*d-s*c+o*g+v*_+h*m-u*p,e[5]=a*i+l*c+s*f-r*d+h*g+v*p+u*_-o*m,e[6]=s*i+l*d+r*c-a*f+u*g+v*m+o*p-h*_,e[7]=l*i-r*f-a*c-s*d+v*g-o*_-h*p-u*m,e}var go=Yt;P.mul=go;function Mo(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var Nt=se.dot;P.dot=Nt;function bo(e,t,n,r){var a=1-r;return Nt(t,n)<0&&(r=-r),e[0]=t[0]*a+n[0]*r,e[1]=t[1]*a+n[1]*r,e[2]=t[2]*a+n[2]*r,e[3]=t[3]*a+n[3]*r,e[4]=t[4]*a+n[4]*r,e[5]=t[5]*a+n[5]*r,e[6]=t[6]*a+n[6]*r,e[7]=t[7]*a+n[7]*r,e}function Ao(e,t){var n=Te(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function wo(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Bt=se.length;P.length=Bt;var xo=Bt;P.len=xo;var Te=se.squaredLength;P.squaredLength=Te;var To=Te;P.sqrLen=To;function Lo(e,t){var n=Te(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,a=t[1]/n,s=t[2]/n,l=t[3]/n,f=t[4],c=t[5],d=t[6],i=t[7],o=r*f+a*c+s*d+l*i;e[0]=r,e[1]=a,e[2]=s,e[3]=l,e[4]=(f-r*o)/n,e[5]=(c-a*o)/n,e[6]=(d-s*o)/n,e[7]=(i-l*o)/n}return e}function So(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Oo(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function Ro(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],l=e[4],f=e[5],c=e[6],d=e[7],i=t[0],o=t[1],h=t[2],u=t[3],v=t[4],_=t[5],p=t[6],m=t[7];return Math.abs(n-i)<=B.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=B.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-h)<=B.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-u)<=B.EPSILON*Math.max(1,Math.abs(s),Math.abs(u))&&Math.abs(l-v)<=B.EPSILON*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(f-_)<=B.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(c-p)<=B.EPSILON*Math.max(1,Math.abs(c),Math.abs(p))&&Math.abs(d-m)<=B.EPSILON*Math.max(1,Math.abs(d),Math.abs(m))}});var nn=Y(S=>{"use strict";function Le(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Le=function(n){return typeof n}:Le=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Le(e)}Object.defineProperty(S,"__esModule",{value:!0});S.create=Gt;S.clone=Io;S.fromValues=Wo;S.copy=Eo;S.set=Co;S.add=qo;S.subtract=Ut;S.multiply=Zt;S.divide=$t;S.ceil=ko;S.floor=Do;S.min=Fo;S.max=zo;S.round=Vo;S.scale=jo;S.scaleAndAdd=Ho;S.distance=Jt;S.squaredDistance=Kt;S.length=en;S.squaredLength=tn;S.negate=Yo;S.inverse=No;S.normalize=Bo;S.dot=Xo;S.cross=Qo;S.lerp=Go;S.random=Uo;S.transformMat2=Zo;S.transformMat2d=$o;S.transformMat3=Jo;S.transformMat4=Ko;S.rotate=el;S.angle=tl;S.zero=nl;S.str=rl;S.exactEquals=il;S.equals=al;S.forEach=S.sqrLen=S.sqrDist=S.dist=S.div=S.mul=S.sub=S.len=void 0;var he=Po($());function Qt(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(Qt=function(a){return a?n:t})(e)}function Po(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Le(e)!=="object"&&typeof e!="function")return{default:e};var n=Qt(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}function Gt(){var e=new he.ARRAY_TYPE(2);return he.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function Io(e){var t=new he.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function Wo(e,t){var n=new he.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function Eo(e,t){return e[0]=t[0],e[1]=t[1],e}function Co(e,t,n){return e[0]=t,e[1]=n,e}function qo(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Ut(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Zt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function $t(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function ko(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function Do(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function Fo(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function zo(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function Vo(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function jo(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function Ho(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function Jt(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function Kt(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function en(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function tn(e){var t=e[0],n=e[1];return t*t+n*n}function Yo(e,t){return e[0]=-t[0],e[1]=-t[1],e}function No(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function Bo(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function Xo(e,t){return e[0]*t[0]+e[1]*t[1]}function Qo(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function Go(e,t,n,r){var a=t[0],s=t[1];return e[0]=a+r*(n[0]-a),e[1]=s+r*(n[1]-s),e}function Uo(e,t){t=t||1;var n=he.RANDOM()*2*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function Zo(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function $o(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function Jo(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function Ko(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function el(e,t,n,r){var a=t[0]-n[0],s=t[1]-n[1],l=Math.sin(r),f=Math.cos(r);return e[0]=a*f-s*l+n[0],e[1]=a*l+s*f+n[1],e}function tl(e,t){var n=e[0],r=e[1],a=t[0],s=t[1],l=Math.sqrt(n*n+r*r)*Math.sqrt(a*a+s*s),f=l&&(n*a+r*s)/l;return Math.acos(Math.min(Math.max(f,-1),1))}function nl(e){return e[0]=0,e[1]=0,e}function rl(e){return"vec2("+e[0]+", "+e[1]+")"}function il(e,t){return e[0]===t[0]&&e[1]===t[1]}function al(e,t){var n=e[0],r=e[1],a=t[0],s=t[1];return Math.abs(n-a)<=he.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=he.EPSILON*Math.max(1,Math.abs(r),Math.abs(s))}var sl=en;S.len=sl;var ol=Ut;S.sub=ol;var ll=Zt;S.mul=ll;var cl=$t;S.div=cl;var fl=Jt;S.dist=fl;var hl=Kt;S.sqrDist=hl;var dl=tn;S.sqrLen=dl;var ul=function(){var e=Gt();return function(t,n,r,a,s,l){var f,c;for(n||(n=2),r||(r=0),a?c=Math.min(a*n+r,t.length):c=t.length,f=r;f<c;f+=n)e[0]=t[f],e[1]=t[f+1],s(e,e,l),t[f]=e[0],t[f+1]=e[1];return t}}();S.forEach=ul});var re=Y(N=>{"use strict";function Se(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Se=function(n){return typeof n}:Se=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Se(e)}Object.defineProperty(N,"__esModule",{value:!0});N.vec4=N.vec3=N.vec2=N.quat2=N.quat=N.mat4=N.mat3=N.mat2d=N.mat2=N.glMatrix=void 0;var pl=ne($());N.glMatrix=pl;var vl=ne(Ge());N.mat2=vl;var _l=ne(Je());N.mat2d=_l;var ml=ne(Pe());N.mat3=ml;var yl=ne(Ie());N.mat4=yl;var gl=ne(ke());N.quat=gl;var Ml=ne(Xt());N.quat2=Ml;var bl=ne(nn());N.vec2=bl;var Al=ne(We());N.vec3=Al;var wl=ne(Ee());N.vec4=wl;function rn(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(rn=function(a){return a?n:t})(e)}function ne(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||Se(e)!=="object"&&typeof e!="function")return{default:e};var n=rn(t);if(n&&n.has(e))return n.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(s!=="default"&&Object.prototype.hasOwnProperty.call(e,s)){var l=a?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(r,s,l):r[s]=e[s]}return r.default=e,n&&n.set(e,r),r}});var an=Y(()=>{WL.registerComponent("8thwall-camera",{camera:{type:WL.Type.Enum,values:["auto","back","front"],default:"auto"}},{name:"wonderland-engine",init:function(){this.position=[0,0,0,0],this.rotation=[0,0,0,0],this.started=!1;let e=["auto","back","front"];this.camera=e[this.camera],this.camera=="auto"&&(this.camera="back"),this.onStart=this.onStart.bind(this),this.onUpdate=this.onUpdate.bind(this),XR8.addCameraPipelineModules([XR8.GlTextureRenderer.pipelineModule(),XR8.XrController.pipelineModule(),this]),this.camera=="back"?XR8.run({canvas:Module.canvas,ownRunLoop:!1}):this.camera=="back"?(XR8.XrController.configure({disableWorldTracking:!0}),XR8.run({canvas:Module.canvas,ownRunLoop:!1,cameraConfig:{direction:XR8.XrConfig.camera().FRONT}})):console.error("[8thwall-camera] Invalid camera setting:",this.camera)},update:function(){if(this.started){if(WL.scene.onPostRender.length==0&&(WL.scene.onPreRender.push(function(){XR8.runPreRender(Date.now()),_wl_reset_context()}),WL.scene.onPostRender.push(function(){XR8.runPostRender(Date.now())})),this.rotation[0]==0&&this.rotation[1]==0&&this.rotation[2]==0&&this.rotation[3]==0)return;this.object.resetTransform(),this.object.rotate(this.rotation),this.object.translate(this.position)}},onUpdate:function(e){if(!e.processCpuResult.reality)return;let t=e.processCpuResult.reality.rotation;this.rotation[0]=t.x,this.rotation[1]=t.y,this.rotation[2]=t.z,this.rotation[3]=t.w;let n=e.processCpuResult.reality.position;this.position[0]=n.x,this.position[1]=n.y,this.position[2]=n.z},onStart:function(){this.started=!0}})});var sn=Y(()=>{WL.registerComponent("cursor-target",{},{init:function(){this.hoverFunctions=[],this.unHoverFunctions=[],this.clickFunctions=[],this.moveFunctions=[],this.downFunctions=[],this.upFunctions=[]},onHover:function(e,t){for(let n of this.hoverFunctions)n(e,t)},onUnhover:function(e,t){for(let n of this.unHoverFunctions)n(e,t)},onClick:function(e,t){for(let n of this.clickFunctions)n(e,t)},onMove:function(e,t){for(let n of this.moveFunctions)n(e,t)},onDown:function(e,t){for(let n of this.downFunctions)n(e,t)},onUp:function(e,t){for(let n of this.upFunctions)n(e,t)},addHoverFunction:function(e){this._validateCallback(e),this.hoverFunctions.push(e)},removeHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.hoverFunctions,e)},addUnHoverFunction:function(e){this._validateCallback(e),this.unHoverFunctions.push(e)},removeUnHoverFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.unHoverFunctions,e)},addClickFunction:function(e){this._validateCallback(e),this.clickFunctions.push(e)},removeClickFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.clickFunctions,e)},addMoveFunction:function(e){this._validateCallback(e),this.moveFunctions.push(e)},removeMoveFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.moveFunctions,e)},addDownFunction:function(e){this._validateCallback(e),this.downFunctions.push(e)},removeDownFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.downFunctions,e)},addUpFunction:function(e){this._validateCallback(e),this.upFunctions.push(e)},removeUpFunction:function(e){this._validateCallback(e),this._removeItemOnce(this.upFunctions,e)},_removeItemOnce:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),e},_validateCallback:function(e){if(typeof e!="function")throw new TypeError(this.object.name+".cursor-target: Argument needs to be a function")}})});var xl={};var ce,on=J(()=>{ce=K(re());WL.registerComponent("cursor",{collisionGroup:{type:WL.Type.Int,default:1},cursorRayObject:{type:WL.Type.Object},cursorRayScalingAxis:{type:WL.Type.Enum,values:["x","y","z","none"],default:"z"},cursorObject:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},styleCursor:{type:WL.Type.Bool,default:!0}},{init:function(){this.session=null,this.collisionMask=1<<this.collisionGroup,this.maxDistance=100;let e=this.onDestroy.bind(this);WL.onSceneLoaded.push(e),this.onDestroyCallbacks=[()=>{let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)}]},start:function(){if(this.handedness==0){let t=this.object.getComponent("input");t?(this.handedness=t.handedness,this.input=t):console.warn("cursor component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];if(this.globalTarget=this.object.addComponent("cursor-target"),this.origin=new Float32Array(3),this.cursorObjScale=new Float32Array(3),this.direction=[0,0,0],this.tempQuat=new Float32Array(4),this.viewComponent=this.object.getComponent("view"),this.viewComponent!=null){let t=this.onClick.bind(this);WL.canvas.addEventListener("click",t);let n=this.onPointerMove.bind(this);WL.canvas.addEventListener("pointermove",n);let r=this.onPointerDown.bind(this);WL.canvas.addEventListener("pointerdown",r);let a=this.onPointerUp.bind(this);WL.canvas.addEventListener("pointerup",a),this.projectionMatrix=new Float32Array(16),ce.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix);let s=this.onViewportResize.bind(this);window.addEventListener("resize",s),this.onDestroyCallbacks.push(()=>{WL.canvas.removeEventListener("click",t),WL.canvas.removeEventListener("pointermove",n),WL.canvas.removeEventListener("pointerdown",r),WL.canvas.removeEventListener("pointerup",a),window.removeEventListener("resize",s)})}this.isHovering=!1,this.visible=!0,this.isDown=!1,this.lastIsDown=!1,this.cursorPos=new Float32Array(3),this.hoveringObject=null;let e=this.setupVREvents.bind(this);WL.onXRSessionStart.push(e),this.onDestroyCallbacks.push(()=>{let t=WL.onXRSessionStart.indexOf(e);t>=0&&WL.onXRSessionStart.splice(t,1)}),this.cursorRayObject&&(this.cursorRayScale=new Float32Array(3),this.cursorRayScale.set(this.cursorRayObject.scalingLocal),this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction),this._setCursorRayTransform([this.origin[0]+this.direction[0],this.origin[1]+this.direction[1],this.origin[2]+this.direction[2]]))},onViewportResize:function(){!this.viewComponent||ce.mat4.invert(this.projectionMatrix,this.viewComponent.projectionMatrix)},_setCursorRayTransform:function(e){if(!this.cursorRayObject)return;let t=ce.vec3.dist(this.origin,e);this.cursorRayObject.setTranslationLocal([0,0,-t/2]),this.cursorRayScalingAxis!=4&&(this.cursorRayObject.resetScaling(),this.cursorRayScale[this.cursorRayScalingAxis]=t/2,this.cursorRayObject.scale(this.cursorRayScale))},_setCursorVisibility:function(e){this.visible!=e&&(this.visible=e,this.cursorObject&&(e?(this.cursorObject.resetScaling(),this.cursorObject.scale(this.cursorObjScale)):(this.cursorObjScale.set(this.cursorObject.scalingLocal),this.cursorObject.scale([0,0,0]))))},update:function(){this.doUpdate(!1)},doUpdate:function(e){if(this.session){if(this.arTouchDown&&this.input&&WL.xrSession.inputSources[0].handedness==="none"&&WL.xrSession.inputSources[0].gamepad){let n=WL.xrSession.inputSources[0].gamepad.axes;this.direction=[n[0],-n[1],-1],this.updateDirection()}else this.object.getTranslationWorld(this.origin),this.object.getForward(this.direction);let t=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);t.hitCount>0?this.cursorPos.set(t.locations[0]):this.cursorPos.fill(0),this.hoverBehaviour(t,e)}this.cursorObject&&(this.hoveringObject&&(this.cursorPos[0]!=0||this.cursorPos[1]!=0||this.cursorPos[2]!=0)?(this._setCursorVisibility(!0),this.cursorObject.setTranslationWorld(this.cursorPos),this._setCursorRayTransform(this.cursorPos)):this._setCursorVisibility(!1))},hoverBehaviour:function(e,t){if(e.hitCount>0){if(!this.hoveringObject||!this.hoveringObject.equals(e.objects[0])){if(this.hoveringObject){let a=this.hoveringObject.getComponent("cursor-target");a&&a.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.hoveringObject=e.objects[0],this.styleCursor&&(WL.canvas.style.cursor="pointer");let r=this.hoveringObject.getComponent("cursor-target");r&&(this.hoveringObjectTarget=r,r.onHover(this.hoveringObject,this)),this.globalTarget.onHover(this.hoveringObject,this)}this.hoveringObjectTarget&&this.hoveringObjectTarget.onMove(this.hoveringObject,this);let n=this.hoveringObject.getComponent("cursor-target");this.isDown!==this.lastIsDown&&(this.isDown?(n&&n.onDown(this.hoveringObject,this),this.globalTarget.onDown(this.hoveringObject,this)):(n&&n.onUp(this.hoveringObject,this),this.globalTarget.onUp(this.hoveringObject,this))),t&&(n&&n.onClick(this.hoveringObject,this),this.globalTarget.onClick(this.hoveringObject,this))}else if(this.hoveringObject&&e.hitCount==0){let n=this.hoveringObject.getComponent("cursor-target");n&&n.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this),this.hoveringObject=null,this.hoveringObjectTarget=null,this.styleCursor&&(WL.canvas.style.cursor="default")}this.lastIsDown=this.isDown},setupVREvents:function(e){this.session=e;let t=function(s){this.session=null}.bind(this);e.addEventListener("end",t);let n=this.onSelect.bind(this);e.addEventListener("select",n);let r=this.onSelectStart.bind(this);e.addEventListener("selectstart",r);let a=this.onSelectEnd.bind(this);e.addEventListener("selectend",a),this.onDestroyCallbacks.push(()=>{!this.session||(e.removeEventListener("end",t),e.removeEventListener("select",n),e.removeEventListener("selectstart",r),e.removeEventListener("selectend",a))}),this.onViewportResize()},onSelect:function(e){e.inputSource.handedness==this.handedness&&this.doUpdate(!0)},onSelectStart:function(e){this.arTouchDown=!0,e.inputSource.handedness==this.handedness&&(this.isDown=!0)},onSelectEnd:function(e){this.arTouchDown=!1,e.inputSource.handedness==this.handedness&&(this.isDown=!1)},onPointerMove:function(e){if(!e.isPrimary)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(n,!1)},onClick:function(e){let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.hoverBehaviour(n,!0)},onPointerDown:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!0,this.hoverBehaviour(n,!1)},onPointerUp:function(e){if(!e.isPrimary||e.button!==0)return;let t=e.target.getBoundingClientRect(),n=this.updateMousePos(e.clientX,e.clientY,t.width,t.height);this.isDown=!1,this.hoverBehaviour(n,!1)},updateMousePos:function(e,t,n,r){let a=e/n,s=t/r;return this.direction=[a*2-1,-s*2+1,-1],this.updateDirection()},updateDirection:function(){this.object.getTranslationWorld(this.origin),ce.vec3.transformMat4(this.direction,this.direction,this.projectionMatrix),ce.vec3.normalize(this.direction,this.direction),ce.vec3.transformQuat(this.direction,this.direction,this.object.transformWorld);let e=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(this.origin,this.direction,this.collisionMask):WL.physics.rayCast(this.origin,this.direction,this.collisionMask,this.maxDistance);return e.hitCount>0?this.cursorPos.set(e.locations[0]):this.cursorPos.fill(0),e},onDeactivate:function(){if(this._setCursorVisibility(!1),this.hoveringObject){let e=this.hoveringObject.getComponent("cursor-target");e&&e.onUnhover(this.hoveringObject,this),this.globalTarget.onUnhover(this.hoveringObject,this)}this.cursorRayObject&&this.cursorRayObject.scale([0,0,0])},onActivate:function(){this._setCursorVisibility(!0)},onDestroy:function(){for(let e of this.onDestroyCallbacks)e()}})});var ln=Y(()=>{WL.registerComponent("debug-object",{obj:{type:WL.Type.Object}},{start:function(){},init:function(){let e=[0,0,0];glMatrix.quat2.getTranslation(e,this.object.transformWorld),console.log("Debug Object:",this.object.name),console.log("Other object:",this.obj.name),console.log("	translation",e),console.log("	transformWorld",this.object.transformWorld),console.log("	transformLocal",this.object.transformLocal)},update:function(){}})});var cn=Y(()=>{function Tl(e,t,n,r){let a=Math.cos(t/2),s=Math.cos(n/2),l=Math.cos(r/2),f=Math.sin(t/2),c=Math.sin(n/2),d=Math.sin(r/2);e[0]=f*s*l+a*c*d,e[1]=a*c*l-f*s*d,e[2]=a*s*d-f*c*l,e[3]=a*s*l+f*c*d}WL.registerComponent("device-orientation-look",{},{start:function(){this.rotationX=0,this.rotationY=0,this.lastClientX=-1,this.lastClientY=-1},init:function(){this.deviceOrientation=[0,0,0,1],this.screenOrientation=window.innerHeight>window.innerWidth?0:90,this._origin=[0,0,0],window.addEventListener("deviceorientation",function(e){let t=e.alpha||0,n=e.beta||0,r=e.gamma||0,a=Math.PI/180;Tl(this.deviceOrientation,n*a,t*a,-r*a)}.bind(this)),window.addEventListener("orientationchange",function(e){this.screenOrientation=window.orientation||0}.bind(this),!1)},update:function(){Module.webxr_session==null&&(glMatrix.quat2.getTranslation(this._origin,this.object.transformLocal),this.object.resetTransform(),this.screenOrientation!=0&&this.object.rotateAxisAngleDeg([0,0,-1],this.screenOrientation),this.object.rotate([-Math.sqrt(.5),0,0,Math.sqrt(.5)]),this.object.rotate(this.deviceOrientation),this.object.translate(this._origin))}})});var fn=Y(()=>{WL.registerComponent("finger-cursor",{},{init:function(){this.lastTarget=null},start:function(){this.tip=this.object.getComponent("collision")},update:function(){let e=this.tip.queryOverlaps(),t=null;for(let n=0;n<e.length;++n){let r=e[n].object,a=r.getComponent("cursor-target");if(a){a.equals(this.lastTarget)||(a.onHover(r,this),a.onClick(r,this)),t=a;break}}if(t)this.lastTarget=t;else{this.lastTarget&&this.lastTarget.onUnhover(this.lastTarget.object,this),this.lastTarget=null;return}}})});var hn=Y(()=>{WL.registerComponent("fixed-foveation",{fixedFoveation:{type:WL.Type.Float,default:.5}},{start:function(){WL.xrSession?this.setFixedFoveation():WL.onXRSessionStart.push(this.setFixedFoveation.bind(this))},setFixedFoveation:function(){"webxr_baseLayer"in Module&&(Module.webxr_baseLayer.fixedFoveation=this.fixedFoveation)}})});var Ll={};var de,dn=J(()=>{de=K(re());WL.registerComponent("hand-tracking",{handedness:{type:WL.Type.Enum,default:"left",values:["left","right"]},jointMesh:{type:WL.Type.Mesh,default:null},jointMaterial:{type:WL.Type.Material,default:null},handSkin:{type:WL.Type.Skin,default:null},deactivateChildrenWithoutPose:{type:WL.Type.Bool,default:!0},controllerToDeactivate:{type:WL.Type.Object}},{ORDERED_JOINTS:["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"],init:function(){this.handedness=["left","right"][this.handedness]},start:function(){if(this.joints=[],this.session=null,this.hasPose=!1,this._childrenActive=!0,!("XRHand"in window)){console.warn("WebXR Hand Tracking not supported by this browser."),this.active=!1;return}if(this.handSkin){let t=this.handSkin.jointIds;this.joints[this.ORDERED_JOINTS[0]]=new WL.Object(t[0]);for(let n=0;n<t.length;++n){let r=new WL.Object(t[n]);this.joints[r.name]=r}return}for(let e=0;e<=this.ORDERED_JOINTS.length;++e){let t=WL.scene.addObject(this.object.parent),n=t.addComponent("mesh");n.mesh=this.jointMesh,n.material=this.jointMaterial,this.joints[this.ORDERED_JOINTS[e]]=t}},update:function(e){if(this.session||WL.xrSession&&this.setupVREvents(WL.xrSession),!!this.session){if(this.hasPose=!1,this.session&&this.session.inputSources)for(let t=0;t<=this.session.inputSources.length;++t){let n=this.session.inputSources[t];if(!n||!n.hand||n.handedness!=this.handedness)continue;if(this.hasPose=!0,n.hand.get("wrist")!==null){let s=Module.webxr_frame.getJointPose(n.hand.get("wrist"),WebXR.refSpaces[WebXR.refSpace]);s&&(this.object.resetTranslationRotation(),this.object.transformLocal.set([s.transform.orientation.x,s.transform.orientation.y,s.transform.orientation.z,s.transform.orientation.w]),this.object.translate([s.transform.position.x,s.transform.position.y,s.transform.position.z]))}let r=new Float32Array(3),a=new Float32Array(4);de.quat.invert(a,this.object.transformLocal),this.object.getTranslationLocal(r);for(let s=0;s<this.ORDERED_JOINTS.length;++s){let l=this.ORDERED_JOINTS[s],f=this.joints[l];if(f==null)continue;let c=null;if(n.hand.get(l)!==null&&(c=Module.webxr_frame.getJointPose(n.hand.get(l),WebXR.refSpaces[WebXR.refSpace])),c!==null)if(this.handSkin)f.resetTranslationRotation(),f.translate([c.transform.position.x-r[0],c.transform.position.y-r[1],c.transform.position.z-r[2]]),f.rotate(a),f.rotateObject([c.transform.orientation.x,c.transform.orientation.y,c.transform.orientation.z,c.transform.orientation.w]);else{f.resetTransform(),f.transformLocal.set([c.transform.orientation.x,c.transform.orientation.y,c.transform.orientation.z,c.transform.orientation.w]),f.translate([c.transform.position.x,c.transform.position.y,c.transform.position.z]);let d=c.radius||.007;f.scale([d,d,d])}else this.handSkin||f.scale([0,0,0])}}!this.hasPose&&this._childrenActive?(this._childrenActive=!1,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!1),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!0,this.setChildrenActive(!0,this.controllerToDeactivate))):this.hasPose&&!this._childrenActive&&(this._childrenActive=!0,this.deactivateChildrenWithoutPose&&this.setChildrenActive(!0),this.controllerToDeactivate&&(this.controllerToDeactivate.active=!1,this.setChildrenActive(!1,this.controllerToDeactivate)))}},setChildrenActive:function(e,t){t=t||this.object;let n=t.children;for(let r of n)r.active=e,this.setChildrenActive(e,r)},isGrabbing:function(){let e=[0,0,0];de.quat2.getTranslation(e,this.joints["index-finger-tip"].transformLocal);let t=[0,0,0];return de.quat2.getTranslation(t,this.joints["thumb-tip"].transformLocal),de.vec3.sqrDist(t,e)<.001},setupVREvents:function(e){this.session=e}})});var Sl={};var un,pn=J(()=>{un=K(re());WL.registerComponent("hit-test-location",{},{init:function(){WL.onXRSessionStart.push(this.xrSessionStart.bind(this)),WL.onXRSessionEnd.push(this.xrSessionEnd.bind(this)),this.tempScaling=new Float32Array(3),this.tempScaling.set(this.object.scalingLocal),this.visible=!1,this.object.scale([0,0,0])},update:function(e){let t=this.visible;if(this.xrHitTestSource){let n=Module.webxr_frame;if(!n)return;let r=n.getHitTestResults(this.xrHitTestSource);if(r.length>0){let a=r[0].getPose(this.xrViewerSpace);this.visible=!0,un.quat2.fromMat4(this.object.transformLocal,a.transform.matrix),this.object.setDirty()}else this.visible=!1}this.visible!=t&&(this.visible?(this.object.scalingLocal.set(this.tempScaling),this.object.setDirty()):(this.tempScaling.set(this.object.scalingLocal),this.object.scale([0,0,0])))},xrSessionStart:function(e){e.requestReferenceSpace("viewer").then(function(t){this.xrViewerSpace=t,e.requestHitTestSource({space:this.xrViewerSpace}).then(function(n){this.xrHitTestSource=n}.bind(this)).catch(console.error)}.bind(this)).catch(console.error)},xrSessionEnd:function(){!this.xrHitTestSource||(this.xrHitTestSource.cancel(),this.xrHitTestSource=null)}})});var Fe=Y(Oe=>{(function(){"use strict";var e=function(){this.init()};e.prototype={init:function(){var i=this||t;return i._counter=1e3,i._html5AudioPool=[],i.html5PoolSize=10,i._codecs={},i._howls=[],i._muted=!1,i._volume=1,i._canPlayEvent="canplaythrough",i._navigator=typeof window<"u"&&window.navigator?window.navigator:null,i.masterGain=null,i.noAudio=!1,i.usingWebAudio=!0,i.autoSuspend=!0,i.ctx=null,i.autoUnlock=!0,i._setup(),i},volume:function(i){var o=this||t;if(i=parseFloat(i),o.ctx||d(),typeof i<"u"&&i>=0&&i<=1){if(o._volume=i,o._muted)return o;o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var u=o._howls[h]._getSoundIds(),v=0;v<u.length;v++){var _=o._howls[h]._soundById(u[v]);_&&_._node&&(_._node.volume=_._volume*i)}return o}return o._volume},mute:function(i){var o=this||t;o.ctx||d(),o._muted=i,o.usingWebAudio&&o.masterGain.gain.setValueAtTime(i?0:o._volume,t.ctx.currentTime);for(var h=0;h<o._howls.length;h++)if(!o._howls[h]._webAudio)for(var u=o._howls[h]._getSoundIds(),v=0;v<u.length;v++){var _=o._howls[h]._soundById(u[v]);_&&_._node&&(_._node.muted=i?!0:_._muted)}return o},stop:function(){for(var i=this||t,o=0;o<i._howls.length;o++)i._howls[o].stop();return i},unload:function(){for(var i=this||t,o=i._howls.length-1;o>=0;o--)i._howls[o].unload();return i.usingWebAudio&&i.ctx&&typeof i.ctx.close<"u"&&(i.ctx.close(),i.ctx=null,d()),i},codecs:function(i){return(this||t)._codecs[i.replace(/^x-/,"")]},_setup:function(){var i=this||t;if(i.state=i.ctx&&i.ctx.state||"suspended",i._autoSuspend(),!i.usingWebAudio)if(typeof Audio<"u")try{var o=new Audio;typeof o.oncanplaythrough>"u"&&(i._canPlayEvent="canplay")}catch{i.noAudio=!0}else i.noAudio=!0;try{var o=new Audio;o.muted&&(i.noAudio=!0)}catch{}return i.noAudio||i._setupCodecs(),i},_setupCodecs:function(){var i=this||t,o=null;try{o=typeof Audio<"u"?new Audio:null}catch{return i}if(!o||typeof o.canPlayType!="function")return i;var h=o.canPlayType("audio/mpeg;").replace(/^no$/,""),u=i._navigator?i._navigator.userAgent:"",v=u.match(/OPR\/([0-6].)/g),_=v&&parseInt(v[0].split("/")[1],10)<33,p=u.indexOf("Safari")!==-1&&u.indexOf("Chrome")===-1,m=u.match(/Version\/(.*?) /),g=p&&m&&parseInt(m[1],10)<15;return i._codecs={mp3:!!(!_&&(h||o.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!h,opus:!!o.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!o.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(o.canPlayType('audio/wav; codecs="1"')||o.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!o.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!o.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(o.canPlayType("audio/x-m4a;")||o.canPlayType("audio/m4a;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(o.canPlayType("audio/x-m4b;")||o.canPlayType("audio/m4b;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(o.canPlayType("audio/x-mp4;")||o.canPlayType("audio/mp4;")||o.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!g&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!g&&o.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!o.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(o.canPlayType("audio/x-flac;")||o.canPlayType("audio/flac;")).replace(/^no$/,"")},i},_unlockAudio:function(){var i=this||t;if(!(i._audioUnlocked||!i.ctx)){i._audioUnlocked=!1,i.autoUnlock=!1,!i._mobileUnloaded&&i.ctx.sampleRate!==44100&&(i._mobileUnloaded=!0,i.unload()),i._scratchBuffer=i.ctx.createBuffer(1,1,22050);var o=function(h){for(;i._html5AudioPool.length<i.html5PoolSize;)try{var u=new Audio;u._unlocked=!0,i._releaseHtml5Audio(u)}catch{i.noAudio=!0;break}for(var v=0;v<i._howls.length;v++)if(!i._howls[v]._webAudio)for(var _=i._howls[v]._getSoundIds(),p=0;p<_.length;p++){var m=i._howls[v]._soundById(_[p]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}i._autoResume();var g=i.ctx.createBufferSource();g.buffer=i._scratchBuffer,g.connect(i.ctx.destination),typeof g.start>"u"?g.noteOn(0):g.start(0),typeof i.ctx.resume=="function"&&i.ctx.resume(),g.onended=function(){g.disconnect(0),i._audioUnlocked=!0,document.removeEventListener("touchstart",o,!0),document.removeEventListener("touchend",o,!0),document.removeEventListener("click",o,!0),document.removeEventListener("keydown",o,!0);for(var M=0;M<i._howls.length;M++)i._howls[M]._emit("unlock")}};return document.addEventListener("touchstart",o,!0),document.addEventListener("touchend",o,!0),document.addEventListener("click",o,!0),document.addEventListener("keydown",o,!0),i}},_obtainHtml5Audio:function(){var i=this||t;if(i._html5AudioPool.length)return i._html5AudioPool.pop();var o=new Audio().play();return o&&typeof Promise<"u"&&(o instanceof Promise||typeof o.then=="function")&&o.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(i){var o=this||t;return i._unlocked&&o._html5AudioPool.push(i),o},_autoSuspend:function(){var i=this;if(!(!i.autoSuspend||!i.ctx||typeof i.ctx.suspend>"u"||!t.usingWebAudio)){for(var o=0;o<i._howls.length;o++)if(i._howls[o]._webAudio){for(var h=0;h<i._howls[o]._sounds.length;h++)if(!i._howls[o]._sounds[h]._paused)return i}return i._suspendTimer&&clearTimeout(i._suspendTimer),i._suspendTimer=setTimeout(function(){if(!!i.autoSuspend){i._suspendTimer=null,i.state="suspending";var u=function(){i.state="suspended",i._resumeAfterSuspend&&(delete i._resumeAfterSuspend,i._autoResume())};i.ctx.suspend().then(u,u)}},3e4),i}},_autoResume:function(){var i=this;if(!(!i.ctx||typeof i.ctx.resume>"u"||!t.usingWebAudio))return i.state==="running"&&i.ctx.state!=="interrupted"&&i._suspendTimer?(clearTimeout(i._suspendTimer),i._suspendTimer=null):i.state==="suspended"||i.state==="running"&&i.ctx.state==="interrupted"?(i.ctx.resume().then(function(){i.state="running";for(var o=0;o<i._howls.length;o++)i._howls[o]._emit("resume")}),i._suspendTimer&&(clearTimeout(i._suspendTimer),i._suspendTimer=null)):i.state==="suspending"&&(i._resumeAfterSuspend=!0),i}};var t=new e,n=function(i){var o=this;if(!i.src||i.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}o.init(i)};n.prototype={init:function(i){var o=this;return t.ctx||d(),o._autoplay=i.autoplay||!1,o._format=typeof i.format!="string"?i.format:[i.format],o._html5=i.html5||!1,o._muted=i.mute||!1,o._loop=i.loop||!1,o._pool=i.pool||5,o._preload=typeof i.preload=="boolean"||i.preload==="metadata"?i.preload:!0,o._rate=i.rate||1,o._sprite=i.sprite||{},o._src=typeof i.src!="string"?i.src:[i.src],o._volume=i.volume!==void 0?i.volume:1,o._xhr={method:i.xhr&&i.xhr.method?i.xhr.method:"GET",headers:i.xhr&&i.xhr.headers?i.xhr.headers:null,withCredentials:i.xhr&&i.xhr.withCredentials?i.xhr.withCredentials:!1},o._duration=0,o._state="unloaded",o._sounds=[],o._endTimers={},o._queue=[],o._playLock=!1,o._onend=i.onend?[{fn:i.onend}]:[],o._onfade=i.onfade?[{fn:i.onfade}]:[],o._onload=i.onload?[{fn:i.onload}]:[],o._onloaderror=i.onloaderror?[{fn:i.onloaderror}]:[],o._onplayerror=i.onplayerror?[{fn:i.onplayerror}]:[],o._onpause=i.onpause?[{fn:i.onpause}]:[],o._onplay=i.onplay?[{fn:i.onplay}]:[],o._onstop=i.onstop?[{fn:i.onstop}]:[],o._onmute=i.onmute?[{fn:i.onmute}]:[],o._onvolume=i.onvolume?[{fn:i.onvolume}]:[],o._onrate=i.onrate?[{fn:i.onrate}]:[],o._onseek=i.onseek?[{fn:i.onseek}]:[],o._onunlock=i.onunlock?[{fn:i.onunlock}]:[],o._onresume=[],o._webAudio=t.usingWebAudio&&!o._html5,typeof t.ctx<"u"&&t.ctx&&t.autoUnlock&&t._unlockAudio(),t._howls.push(o),o._autoplay&&o._queue.push({event:"play",action:function(){o.play()}}),o._preload&&o._preload!=="none"&&o.load(),o},load:function(){var i=this,o=null;if(t.noAudio){i._emit("loaderror",null,"No audio support.");return}typeof i._src=="string"&&(i._src=[i._src]);for(var h=0;h<i._src.length;h++){var u,v;if(i._format&&i._format[h])u=i._format[h];else{if(v=i._src[h],typeof v!="string"){i._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}u=/^data:audio\/([^;,]+);/i.exec(v),u||(u=/\.([^.]+)$/.exec(v.split("?",1)[0])),u&&(u=u[1].toLowerCase())}if(u||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),u&&t.codecs(u)){o=i._src[h];break}}if(!o){i._emit("loaderror",null,"No codec support for selected audio sources.");return}return i._src=o,i._state="loading",window.location.protocol==="https:"&&o.slice(0,5)==="http:"&&(i._html5=!0,i._webAudio=!1),new r(i),i._webAudio&&s(i),i},play:function(i,o){var h=this,u=null;if(typeof i=="number")u=i,i=null;else{if(typeof i=="string"&&h._state==="loaded"&&!h._sprite[i])return null;if(typeof i>"u"&&(i="__default",!h._playLock)){for(var v=0,_=0;_<h._sounds.length;_++)h._sounds[_]._paused&&!h._sounds[_]._ended&&(v++,u=h._sounds[_]._id);v===1?i=null:u=null}}var p=u?h._soundById(u):h._inactiveSound();if(!p)return null;if(u&&!i&&(i=p._sprite||"__default"),h._state!=="loaded"){p._sprite=i,p._ended=!1;var m=p._id;return h._queue.push({event:"play",action:function(){h.play(m)}}),m}if(u&&!p._paused)return o||h._loadQueue("play"),p._id;h._webAudio&&t._autoResume();var g=Math.max(0,p._seek>0?p._seek:h._sprite[i][0]/1e3),M=Math.max(0,(h._sprite[i][0]+h._sprite[i][1])/1e3-g),b=M*1e3/Math.abs(p._rate),A=h._sprite[i][0]/1e3,w=(h._sprite[i][0]+h._sprite[i][1])/1e3;p._sprite=i,p._ended=!1;var C=function(){p._paused=!1,p._seek=g,p._start=A,p._stop=w,p._loop=!!(p._loop||h._sprite[i][2])};if(g>=w){h._ended(p);return}var O=p._node;if(h._webAudio){var D=function(){h._playLock=!1,C(),h._refreshBuffer(p);var q=p._muted||h._muted?0:p._volume;O.gain.setValueAtTime(q,t.ctx.currentTime),p._playStart=t.ctx.currentTime,typeof O.bufferSource.start>"u"?p._loop?O.bufferSource.noteGrainOn(0,g,86400):O.bufferSource.noteGrainOn(0,g,M):p._loop?O.bufferSource.start(0,g,86400):O.bufferSource.start(0,g,M),b!==1/0&&(h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),b)),o||setTimeout(function(){h._emit("play",p._id),h._loadQueue()},0)};t.state==="running"&&t.ctx.state!=="interrupted"?D():(h._playLock=!0,h.once("resume",D),h._clearTimer(p._id))}else{var k=function(){O.currentTime=g,O.muted=p._muted||h._muted||t._muted||O.muted,O.volume=p._volume*t.volume(),O.playbackRate=p._rate;try{var q=O.play();if(q&&typeof Promise<"u"&&(q instanceof Promise||typeof q.then=="function")?(h._playLock=!0,C(),q.then(function(){h._playLock=!1,O._unlocked=!0,o?h._loadQueue():h._emit("play",p._id)}).catch(function(){h._playLock=!1,h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):o||(h._playLock=!1,C(),h._emit("play",p._id)),O.playbackRate=p._rate,O.paused){h._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}i!=="__default"||p._loop?h._endTimers[p._id]=setTimeout(h._ended.bind(h,p),b):(h._endTimers[p._id]=function(){h._ended(p),O.removeEventListener("ended",h._endTimers[p._id],!1)},O.addEventListener("ended",h._endTimers[p._id],!1))}catch(I){h._emit("playerror",p._id,I)}};O.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(O.src=h._src,O.load());var j=window&&window.ejecta||!O.readyState&&t._navigator.isCocoonJS;if(O.readyState>=3||j)k();else{h._playLock=!0,h._state="loading";var F=function(){h._state="loaded",k(),O.removeEventListener(t._canPlayEvent,F,!1)};O.addEventListener(t._canPlayEvent,F,!1),h._clearTimer(p._id)}}return p._id},pause:function(i){var o=this;if(o._state!=="loaded"||o._playLock)return o._queue.push({event:"pause",action:function(){o.pause(i)}}),o;for(var h=o._getSoundIds(i),u=0;u<h.length;u++){o._clearTimer(h[u]);var v=o._soundById(h[u]);if(v&&!v._paused&&(v._seek=o.seek(h[u]),v._rateSeek=0,v._paused=!0,o._stopFade(h[u]),v._node))if(o._webAudio){if(!v._node.bufferSource)continue;typeof v._node.bufferSource.stop>"u"?v._node.bufferSource.noteOff(0):v._node.bufferSource.stop(0),o._cleanBuffer(v._node)}else(!isNaN(v._node.duration)||v._node.duration===1/0)&&v._node.pause();arguments[1]||o._emit("pause",v?v._id:null)}return o},stop:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"stop",action:function(){h.stop(i)}}),h;for(var u=h._getSoundIds(i),v=0;v<u.length;v++){h._clearTimer(u[v]);var _=h._soundById(u[v]);_&&(_._seek=_._start||0,_._rateSeek=0,_._paused=!0,_._ended=!0,h._stopFade(u[v]),_._node&&(h._webAudio?_._node.bufferSource&&(typeof _._node.bufferSource.stop>"u"?_._node.bufferSource.noteOff(0):_._node.bufferSource.stop(0),h._cleanBuffer(_._node)):(!isNaN(_._node.duration)||_._node.duration===1/0)&&(_._node.currentTime=_._start||0,_._node.pause(),_._node.duration===1/0&&h._clearSound(_._node))),o||h._emit("stop",_._id))}return h},mute:function(i,o){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"mute",action:function(){h.mute(i,o)}}),h;if(typeof o>"u")if(typeof i=="boolean")h._muted=i;else return h._muted;for(var u=h._getSoundIds(o),v=0;v<u.length;v++){var _=h._soundById(u[v]);_&&(_._muted=i,_._interval&&h._stopFade(_._id),h._webAudio&&_._node?_._node.gain.setValueAtTime(i?0:_._volume,t.ctx.currentTime):_._node&&(_._node.muted=t._muted?!0:i),h._emit("mute",_._id))}return h},volume:function(){var i=this,o=arguments,h,u;if(o.length===0)return i._volume;if(o.length===1||o.length===2&&typeof o[1]>"u"){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?u=parseInt(o[0],10):h=parseFloat(o[0])}else o.length>=2&&(h=parseFloat(o[0]),u=parseInt(o[1],10));var p;if(typeof h<"u"&&h>=0&&h<=1){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"volume",action:function(){i.volume.apply(i,o)}}),i;typeof u>"u"&&(i._volume=h),u=i._getSoundIds(u);for(var m=0;m<u.length;m++)p=i._soundById(u[m]),p&&(p._volume=h,o[2]||i._stopFade(u[m]),i._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(h,t.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=h*t.volume()),i._emit("volume",p._id))}else return p=u?i._soundById(u):i._sounds[0],p?p._volume:0;return i},fade:function(i,o,h,u){var v=this;if(v._state!=="loaded"||v._playLock)return v._queue.push({event:"fade",action:function(){v.fade(i,o,h,u)}}),v;i=Math.min(Math.max(0,parseFloat(i)),1),o=Math.min(Math.max(0,parseFloat(o)),1),h=parseFloat(h),v.volume(i,u);for(var _=v._getSoundIds(u),p=0;p<_.length;p++){var m=v._soundById(_[p]);if(m){if(u||v._stopFade(_[p]),v._webAudio&&!m._muted){var g=t.ctx.currentTime,M=g+h/1e3;m._volume=i,m._node.gain.setValueAtTime(i,g),m._node.gain.linearRampToValueAtTime(o,M)}v._startFadeInterval(m,i,o,h,_[p],typeof u>"u")}}return v},_startFadeInterval:function(i,o,h,u,v,_){var p=this,m=o,g=h-o,M=Math.abs(g/.01),b=Math.max(4,M>0?u/M:u),A=Date.now();i._fadeTo=h,i._interval=setInterval(function(){var w=(Date.now()-A)/u;A=Date.now(),m+=g*w,m=Math.round(m*100)/100,g<0?m=Math.max(h,m):m=Math.min(h,m),p._webAudio?i._volume=m:p.volume(m,i._id,!0),_&&(p._volume=m),(h<o&&m<=h||h>o&&m>=h)&&(clearInterval(i._interval),i._interval=null,i._fadeTo=null,p.volume(h,i._id),p._emit("fade",i._id))},b)},_stopFade:function(i){var o=this,h=o._soundById(i);return h&&h._interval&&(o._webAudio&&h._node.gain.cancelScheduledValues(t.ctx.currentTime),clearInterval(h._interval),h._interval=null,o.volume(h._fadeTo,i),h._fadeTo=null,o._emit("fade",i)),o},loop:function(){var i=this,o=arguments,h,u,v;if(o.length===0)return i._loop;if(o.length===1)if(typeof o[0]=="boolean")h=o[0],i._loop=h;else return v=i._soundById(parseInt(o[0],10)),v?v._loop:!1;else o.length===2&&(h=o[0],u=parseInt(o[1],10));for(var _=i._getSoundIds(u),p=0;p<_.length;p++)v=i._soundById(_[p]),v&&(v._loop=h,i._webAudio&&v._node&&v._node.bufferSource&&(v._node.bufferSource.loop=h,h&&(v._node.bufferSource.loopStart=v._start||0,v._node.bufferSource.loopEnd=v._stop,i.playing(_[p])&&(i.pause(_[p],!0),i.play(_[p],!0)))));return i},rate:function(){var i=this,o=arguments,h,u;if(o.length===0)u=i._sounds[0]._id;else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?u=parseInt(o[0],10):h=parseFloat(o[0])}else o.length===2&&(h=parseFloat(o[0]),u=parseInt(o[1],10));var p;if(typeof h=="number"){if(i._state!=="loaded"||i._playLock)return i._queue.push({event:"rate",action:function(){i.rate.apply(i,o)}}),i;typeof u>"u"&&(i._rate=h),u=i._getSoundIds(u);for(var m=0;m<u.length;m++)if(p=i._soundById(u[m]),p){i.playing(u[m])&&(p._rateSeek=i.seek(u[m]),p._playStart=i._webAudio?t.ctx.currentTime:p._playStart),p._rate=h,i._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(h,t.ctx.currentTime):p._node&&(p._node.playbackRate=h);var g=i.seek(u[m]),M=(i._sprite[p._sprite][0]+i._sprite[p._sprite][1])/1e3-g,b=M*1e3/Math.abs(p._rate);(i._endTimers[u[m]]||!p._paused)&&(i._clearTimer(u[m]),i._endTimers[u[m]]=setTimeout(i._ended.bind(i,p),b)),i._emit("rate",p._id)}}else return p=i._soundById(u),p?p._rate:i._rate;return i},seek:function(){var i=this,o=arguments,h,u;if(o.length===0)i._sounds.length&&(u=i._sounds[0]._id);else if(o.length===1){var v=i._getSoundIds(),_=v.indexOf(o[0]);_>=0?u=parseInt(o[0],10):i._sounds.length&&(u=i._sounds[0]._id,h=parseFloat(o[0]))}else o.length===2&&(h=parseFloat(o[0]),u=parseInt(o[1],10));if(typeof u>"u")return 0;if(typeof h=="number"&&(i._state!=="loaded"||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,o)}}),i;var p=i._soundById(u);if(p)if(typeof h=="number"&&h>=0){var m=i.playing(u);m&&i.pause(u,!0),p._seek=h,p._ended=!1,i._clearTimer(u),!i._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=h);var g=function(){m&&i.play(u,!0),i._emit("seek",u)};if(m&&!i._webAudio){var M=function(){i._playLock?setTimeout(M,0):g()};setTimeout(M,0)}else g()}else if(i._webAudio){var b=i.playing(u)?t.ctx.currentTime-p._playStart:0,A=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(A+b*Math.abs(p._rate))}else return p._node.currentTime;return i},playing:function(i){var o=this;if(typeof i=="number"){var h=o._soundById(i);return h?!h._paused:!1}for(var u=0;u<o._sounds.length;u++)if(!o._sounds[u]._paused)return!0;return!1},duration:function(i){var o=this,h=o._duration,u=o._soundById(i);return u&&(h=o._sprite[u._sprite][1]/1e3),h},state:function(){return this._state},unload:function(){for(var i=this,o=i._sounds,h=0;h<o.length;h++)o[h]._paused||i.stop(o[h]._id),i._webAudio||(i._clearSound(o[h]._node),o[h]._node.removeEventListener("error",o[h]._errorFn,!1),o[h]._node.removeEventListener(t._canPlayEvent,o[h]._loadFn,!1),o[h]._node.removeEventListener("ended",o[h]._endFn,!1),t._releaseHtml5Audio(o[h]._node)),delete o[h]._node,i._clearTimer(o[h]._id);var u=t._howls.indexOf(i);u>=0&&t._howls.splice(u,1);var v=!0;for(h=0;h<t._howls.length;h++)if(t._howls[h]._src===i._src||i._src.indexOf(t._howls[h]._src)>=0){v=!1;break}return a&&v&&delete a[i._src],t.noAudio=!1,i._state="unloaded",i._sounds=[],i=null,null},on:function(i,o,h,u){var v=this,_=v["_on"+i];return typeof o=="function"&&_.push(u?{id:h,fn:o,once:u}:{id:h,fn:o}),v},off:function(i,o,h){var u=this,v=u["_on"+i],_=0;if(typeof o=="number"&&(h=o,o=null),o||h)for(_=0;_<v.length;_++){var p=h===v[_].id;if(o===v[_].fn&&p||!o&&p){v.splice(_,1);break}}else if(i)u["_on"+i]=[];else{var m=Object.keys(u);for(_=0;_<m.length;_++)m[_].indexOf("_on")===0&&Array.isArray(u[m[_]])&&(u[m[_]]=[])}return u},once:function(i,o,h){var u=this;return u.on(i,o,h,1),u},_emit:function(i,o,h){for(var u=this,v=u["_on"+i],_=v.length-1;_>=0;_--)(!v[_].id||v[_].id===o||i==="load")&&(setTimeout(function(p){p.call(this,o,h)}.bind(u,v[_].fn),0),v[_].once&&u.off(i,v[_].fn,v[_].id));return u._loadQueue(i),u},_loadQueue:function(i){var o=this;if(o._queue.length>0){var h=o._queue[0];h.event===i&&(o._queue.shift(),o._loadQueue()),i||h.action()}return o},_ended:function(i){var o=this,h=i._sprite;if(!o._webAudio&&i._node&&!i._node.paused&&!i._node.ended&&i._node.currentTime<i._stop)return setTimeout(o._ended.bind(o,i),100),o;var u=!!(i._loop||o._sprite[h][2]);if(o._emit("end",i._id),!o._webAudio&&u&&o.stop(i._id,!0).play(i._id),o._webAudio&&u){o._emit("play",i._id),i._seek=i._start||0,i._rateSeek=0,i._playStart=t.ctx.currentTime;var v=(i._stop-i._start)*1e3/Math.abs(i._rate);o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),v)}return o._webAudio&&!u&&(i._paused=!0,i._ended=!0,i._seek=i._start||0,i._rateSeek=0,o._clearTimer(i._id),o._cleanBuffer(i._node),t._autoSuspend()),!o._webAudio&&!u&&o.stop(i._id,!0),o},_clearTimer:function(i){var o=this;if(o._endTimers[i]){if(typeof o._endTimers[i]!="function")clearTimeout(o._endTimers[i]);else{var h=o._soundById(i);h&&h._node&&h._node.removeEventListener("ended",o._endTimers[i],!1)}delete o._endTimers[i]}return o},_soundById:function(i){for(var o=this,h=0;h<o._sounds.length;h++)if(i===o._sounds[h]._id)return o._sounds[h];return null},_inactiveSound:function(){var i=this;i._drain();for(var o=0;o<i._sounds.length;o++)if(i._sounds[o]._ended)return i._sounds[o].reset();return new r(i)},_drain:function(){var i=this,o=i._pool,h=0,u=0;if(!(i._sounds.length<o)){for(u=0;u<i._sounds.length;u++)i._sounds[u]._ended&&h++;for(u=i._sounds.length-1;u>=0;u--){if(h<=o)return;i._sounds[u]._ended&&(i._webAudio&&i._sounds[u]._node&&i._sounds[u]._node.disconnect(0),i._sounds.splice(u,1),h--)}}},_getSoundIds:function(i){var o=this;if(typeof i>"u"){for(var h=[],u=0;u<o._sounds.length;u++)h.push(o._sounds[u]._id);return h}else return[i]},_refreshBuffer:function(i){var o=this;return i._node.bufferSource=t.ctx.createBufferSource(),i._node.bufferSource.buffer=a[o._src],i._panner?i._node.bufferSource.connect(i._panner):i._node.bufferSource.connect(i._node),i._node.bufferSource.loop=i._loop,i._loop&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop||0),i._node.bufferSource.playbackRate.setValueAtTime(i._rate,t.ctx.currentTime),o},_cleanBuffer:function(i){var o=this,h=t._navigator&&t._navigator.vendor.indexOf("Apple")>=0;if(t._scratchBuffer&&i.bufferSource&&(i.bufferSource.onended=null,i.bufferSource.disconnect(0),h))try{i.bufferSource.buffer=t._scratchBuffer}catch{}return i.bufferSource=null,o},_clearSound:function(i){var o=/MSIE |Trident\//.test(t._navigator&&t._navigator.userAgent);o||(i.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(i){this._parent=i,this.init()};r.prototype={init:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,o._sounds.push(i),i.create(),i},create:function(){var i=this,o=i._parent,h=t._muted||i._muted||i._parent._muted?0:i._volume;return o._webAudio?(i._node=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),i._node.gain.setValueAtTime(h,t.ctx.currentTime),i._node.paused=!0,i._node.connect(t.masterGain)):t.noAudio||(i._node=t._obtainHtml5Audio(),i._errorFn=i._errorListener.bind(i),i._node.addEventListener("error",i._errorFn,!1),i._loadFn=i._loadListener.bind(i),i._node.addEventListener(t._canPlayEvent,i._loadFn,!1),i._endFn=i._endListener.bind(i),i._node.addEventListener("ended",i._endFn,!1),i._node.src=o._src,i._node.preload=o._preload===!0?"auto":o._preload,i._node.volume=h*t.volume(),i._node.load()),i},reset:function(){var i=this,o=i._parent;return i._muted=o._muted,i._loop=o._loop,i._volume=o._volume,i._rate=o._rate,i._seek=0,i._rateSeek=0,i._paused=!0,i._ended=!0,i._sprite="__default",i._id=++t._counter,i},_errorListener:function(){var i=this;i._parent._emit("loaderror",i._id,i._node.error?i._node.error.code:0),i._node.removeEventListener("error",i._errorFn,!1)},_loadListener:function(){var i=this,o=i._parent;o._duration=Math.ceil(i._node.duration*10)/10,Object.keys(o._sprite).length===0&&(o._sprite={__default:[0,o._duration*1e3]}),o._state!=="loaded"&&(o._state="loaded",o._emit("load"),o._loadQueue()),i._node.removeEventListener(t._canPlayEvent,i._loadFn,!1)},_endListener:function(){var i=this,o=i._parent;o._duration===1/0&&(o._duration=Math.ceil(i._node.duration*10)/10,o._sprite.__default[1]===1/0&&(o._sprite.__default[1]=o._duration*1e3),o._ended(i)),i._node.removeEventListener("ended",i._endFn,!1)}};var a={},s=function(i){var o=i._src;if(a[o]){i._duration=a[o].duration,c(i);return}if(/^data:[^;]+;base64,/.test(o)){for(var h=atob(o.split(",")[1]),u=new Uint8Array(h.length),v=0;v<h.length;++v)u[v]=h.charCodeAt(v);f(u.buffer,i)}else{var _=new XMLHttpRequest;_.open(i._xhr.method,o,!0),_.withCredentials=i._xhr.withCredentials,_.responseType="arraybuffer",i._xhr.headers&&Object.keys(i._xhr.headers).forEach(function(p){_.setRequestHeader(p,i._xhr.headers[p])}),_.onload=function(){var p=(_.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){i._emit("loaderror",null,"Failed loading audio file with status: "+_.status+".");return}f(_.response,i)},_.onerror=function(){i._webAudio&&(i._html5=!0,i._webAudio=!1,i._sounds=[],delete a[o],i.load())},l(_)}},l=function(i){try{i.send()}catch{i.onerror()}},f=function(i,o){var h=function(){o._emit("loaderror",null,"Decoding audio data failed.")},u=function(v){v&&o._sounds.length>0?(a[o._src]=v,c(o,v)):h()};typeof Promise<"u"&&t.ctx.decodeAudioData.length===1?t.ctx.decodeAudioData(i).then(u).catch(h):t.ctx.decodeAudioData(i,u,h)},c=function(i,o){o&&!i._duration&&(i._duration=o.duration),Object.keys(i._sprite).length===0&&(i._sprite={__default:[0,i._duration*1e3]}),i._state!=="loaded"&&(i._state="loaded",i._emit("load"),i._loadQueue())},d=function(){if(!!t.usingWebAudio){try{typeof AudioContext<"u"?t.ctx=new AudioContext:typeof webkitAudioContext<"u"?t.ctx=new webkitAudioContext:t.usingWebAudio=!1}catch{t.usingWebAudio=!1}t.ctx||(t.usingWebAudio=!1);var i=/iP(hone|od|ad)/.test(t._navigator&&t._navigator.platform),o=t._navigator&&t._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),h=o?parseInt(o[1],10):null;if(i&&h&&h<9){var u=/safari/.test(t._navigator&&t._navigator.userAgent.toLowerCase());t._navigator&&!u&&(t.usingWebAudio=!1)}t.usingWebAudio&&(t.masterGain=typeof t.ctx.createGain>"u"?t.ctx.createGainNode():t.ctx.createGain(),t.masterGain.gain.setValueAtTime(t._muted?0:t._volume,t.ctx.currentTime),t.masterGain.connect(t.ctx.destination)),t._setup()}};typeof define=="function"&&define.amd&&define([],function(){return{Howler:t,Howl:n}}),typeof Oe<"u"&&(Oe.Howler=t,Oe.Howl=n),typeof global<"u"?(global.HowlerGlobal=e,global.Howler=t,global.Howl=n,global.Sound=r):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=t,window.Howl=n,window.Sound=r)})();(function(){"use strict";HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var n=this;if(!n.ctx||!n.ctx.listener)return n;for(var r=n._howls.length-1;r>=0;r--)n._howls[r].stereo(t);return n},HowlerGlobal.prototype.pos=function(t,n,r){var a=this;if(!a.ctx||!a.ctx.listener)return a;if(n=typeof n!="number"?a._pos[1]:n,r=typeof r!="number"?a._pos[2]:r,typeof t=="number")a._pos=[t,n,r],typeof a.ctx.listener.positionX<"u"?(a.ctx.listener.positionX.setTargetAtTime(a._pos[0],Howler.ctx.currentTime,.1),a.ctx.listener.positionY.setTargetAtTime(a._pos[1],Howler.ctx.currentTime,.1),a.ctx.listener.positionZ.setTargetAtTime(a._pos[2],Howler.ctx.currentTime,.1)):a.ctx.listener.setPosition(a._pos[0],a._pos[1],a._pos[2]);else return a._pos;return a},HowlerGlobal.prototype.orientation=function(t,n,r,a,s,l){var f=this;if(!f.ctx||!f.ctx.listener)return f;var c=f._orientation;if(n=typeof n!="number"?c[1]:n,r=typeof r!="number"?c[2]:r,a=typeof a!="number"?c[3]:a,s=typeof s!="number"?c[4]:s,l=typeof l!="number"?c[5]:l,typeof t=="number")f._orientation=[t,n,r,a,s,l],typeof f.ctx.listener.forwardX<"u"?(f.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),f.ctx.listener.forwardY.setTargetAtTime(n,Howler.ctx.currentTime,.1),f.ctx.listener.forwardZ.setTargetAtTime(r,Howler.ctx.currentTime,.1),f.ctx.listener.upX.setTargetAtTime(a,Howler.ctx.currentTime,.1),f.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),f.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):f.ctx.listener.setOrientation(t,n,r,a,s,l);else return c;return f},Howl.prototype.init=function(t){return function(n){var r=this;return r._orientation=n.orientation||[1,0,0],r._stereo=n.stereo||null,r._pos=n.pos||null,r._pannerAttr={coneInnerAngle:typeof n.coneInnerAngle<"u"?n.coneInnerAngle:360,coneOuterAngle:typeof n.coneOuterAngle<"u"?n.coneOuterAngle:360,coneOuterGain:typeof n.coneOuterGain<"u"?n.coneOuterGain:0,distanceModel:typeof n.distanceModel<"u"?n.distanceModel:"inverse",maxDistance:typeof n.maxDistance<"u"?n.maxDistance:1e4,panningModel:typeof n.panningModel<"u"?n.panningModel:"HRTF",refDistance:typeof n.refDistance<"u"?n.refDistance:1,rolloffFactor:typeof n.rolloffFactor<"u"?n.rolloffFactor:1},r._onstereo=n.onstereo?[{fn:n.onstereo}]:[],r._onpos=n.onpos?[{fn:n.onpos}]:[],r._onorientation=n.onorientation?[{fn:n.onorientation}]:[],t.call(this,n)}}(Howl.prototype.init),Howl.prototype.stereo=function(t,n){var r=this;if(!r._webAudio)return r;if(r._state!=="loaded")return r._queue.push({event:"stereo",action:function(){r.stereo(t,n)}}),r;var a=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof n>"u")if(typeof t=="number")r._stereo=t,r._pos=[t,0,0];else return r._stereo;for(var s=r._getSoundIds(n),l=0;l<s.length;l++){var f=r._soundById(s[l]);if(f)if(typeof t=="number")f._stereo=t,f._pos=[t,0,0],f._node&&(f._pannerAttr.panningModel="equalpower",(!f._panner||!f._panner.pan)&&e(f,a),a==="spatial"?typeof f._panner.positionX<"u"?(f._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),f._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),f._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):f._panner.setPosition(t,0,0):f._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",f._id);else return f._stereo}return r},Howl.prototype.pos=function(t,n,r,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"pos",action:function(){s.pos(t,n,r,a)}}),s;if(n=typeof n!="number"?0:n,r=typeof r!="number"?-.5:r,typeof a>"u")if(typeof t=="number")s._pos=[t,n,r];else return s._pos;for(var l=s._getSoundIds(a),f=0;f<l.length;f++){var c=s._soundById(l[f]);if(c)if(typeof t=="number")c._pos=[t,n,r],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setPosition(t,n,r)),s._emit("pos",c._id);else return c._pos}return s},Howl.prototype.orientation=function(t,n,r,a){var s=this;if(!s._webAudio)return s;if(s._state!=="loaded")return s._queue.push({event:"orientation",action:function(){s.orientation(t,n,r,a)}}),s;if(n=typeof n!="number"?s._orientation[1]:n,r=typeof r!="number"?s._orientation[2]:r,typeof a>"u")if(typeof t=="number")s._orientation=[t,n,r];else return s._orientation;for(var l=s._getSoundIds(a),f=0;f<l.length;f++){var c=s._soundById(l[f]);if(c)if(typeof t=="number")c._orientation=[t,n,r],c._node&&(c._panner||(c._pos||(c._pos=s._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):c._panner.setOrientation(t,n,r)),s._emit("orientation",c._id);else return c._orientation}return s},Howl.prototype.pannerAttr=function(){var t=this,n=arguments,r,a,s;if(!t._webAudio)return t;if(n.length===0)return t._pannerAttr;if(n.length===1)if(typeof n[0]=="object")r=n[0],typeof a>"u"&&(r.pannerAttr||(r.pannerAttr={coneInnerAngle:r.coneInnerAngle,coneOuterAngle:r.coneOuterAngle,coneOuterGain:r.coneOuterGain,distanceModel:r.distanceModel,maxDistance:r.maxDistance,refDistance:r.refDistance,rolloffFactor:r.rolloffFactor,panningModel:r.panningModel}),t._pannerAttr={coneInnerAngle:typeof r.pannerAttr.coneInnerAngle<"u"?r.pannerAttr.coneInnerAngle:t._coneInnerAngle,coneOuterAngle:typeof r.pannerAttr.coneOuterAngle<"u"?r.pannerAttr.coneOuterAngle:t._coneOuterAngle,coneOuterGain:typeof r.pannerAttr.coneOuterGain<"u"?r.pannerAttr.coneOuterGain:t._coneOuterGain,distanceModel:typeof r.pannerAttr.distanceModel<"u"?r.pannerAttr.distanceModel:t._distanceModel,maxDistance:typeof r.pannerAttr.maxDistance<"u"?r.pannerAttr.maxDistance:t._maxDistance,refDistance:typeof r.pannerAttr.refDistance<"u"?r.pannerAttr.refDistance:t._refDistance,rolloffFactor:typeof r.pannerAttr.rolloffFactor<"u"?r.pannerAttr.rolloffFactor:t._rolloffFactor,panningModel:typeof r.pannerAttr.panningModel<"u"?r.pannerAttr.panningModel:t._panningModel});else return s=t._soundById(parseInt(n[0],10)),s?s._pannerAttr:t._pannerAttr;else n.length===2&&(r=n[0],a=parseInt(n[1],10));for(var l=t._getSoundIds(a),f=0;f<l.length;f++)if(s=t._soundById(l[f]),s){var c=s._pannerAttr;c={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:c.coneOuterGain,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:c.distanceModel,maxDistance:typeof r.maxDistance<"u"?r.maxDistance:c.maxDistance,refDistance:typeof r.refDistance<"u"?r.refDistance:c.refDistance,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:c.rolloffFactor,panningModel:typeof r.panningModel<"u"?r.panningModel:c.panningModel};var d=s._panner;d?(d.coneInnerAngle=c.coneInnerAngle,d.coneOuterAngle=c.coneOuterAngle,d.coneOuterGain=c.coneOuterGain,d.distanceModel=c.distanceModel,d.maxDistance=c.maxDistance,d.refDistance=c.refDistance,d.rolloffFactor=c.rolloffFactor,d.panningModel=c.panningModel):(s._pos||(s._pos=t._pos||[0,0,-.5]),e(s,"spatial"))}return t},Sound.prototype.init=function(t){return function(){var n=this,r=n._parent;n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,t.call(this),n._stereo?r.stereo(n._stereo):n._pos&&r.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var n=this,r=n._parent;return n._orientation=r._orientation,n._stereo=r._stereo,n._pos=r._pos,n._pannerAttr=r._pannerAttr,n._stereo?r.stereo(n._stereo):n._pos?r.pos(n._pos[0],n._pos[1],n._pos[2],n._id):n._panner&&(n._panner.disconnect(0),n._panner=void 0,r._refreshBuffer(n)),t.call(this)}}(Sound.prototype.reset);var e=function(t,n){n=n||"spatial",n==="spatial"?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,typeof t._panner.positionX<"u"?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),typeof t._panner.orientationX<"u"?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}})()});var Ol={};var cc,vn=J(()=>{cc=K(Fe());WL.registerComponent("howler-audio-listener",{spatial:{type:WL.Type.Bool,default:!0}},{init:function(){this.origin=new Float32Array(3),this.fwd=new Float32Array(3),this.up=new Float32Array(3)},update:function(){!this.spatial||(this.object.getTranslationWorld(this.origin),this.object.getForward(this.fwd),this.object.getUp(this.up),Howler.pos(this.origin[0],this.origin[1],this.origin[2]),Howler.orientation(this.fwd[0],this.fwd[1],this.fwd[2],this.up[0],this.up[1],this.up[2]))}})});var Rl={};var _n,mn=J(()=>{_n=K(Fe());WL.registerComponent("howler-audio-source",{volume:{type:WL.Type.Float,default:1},spatial:{type:WL.Type.Bool,default:!0},loop:{type:WL.Type.Bool,default:!1},autoplay:{type:WL.Type.Bool,default:!1},src:{type:WL.Type.String,default:""}},{start:function(){this.audio=new _n.Howl({src:[this.src],loop:this.loop,volume:this.volume,autoplay:this.autoplay}),this.lastPlayedAudioId=null,this.origin=new Float32Array(3),this.lastOrigin=new Float32Array(3),this.spatial&&this.autoplay&&(this.updatePosition(),this.play());let e=()=>{this.stop();let t=WL.onSceneLoaded.indexOf(e);t>=0&&WL.onSceneLoaded.splice(t,1)};WL.onSceneLoaded.push(e)},update:function(){!this.spatial||!this.lastPlayedAudioId||(this.object.getTranslationWorld(this.origin),(Math.abs(this.lastOrigin[0]-this.origin[0])>.005||Math.abs(this.lastOrigin[1]-this.origin[1])>.005||Math.abs(this.lastOrigin[2]-this.origin[2])>.005)&&this.updatePosition())},updatePosition:function(){this.audio.pos(this.origin[0],this.origin[1],this.origin[2],this.lastPlayedAudioId),this.lastOrigin.set(this.origin)},play:function(){this.lastPlayedAudioId&&this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=this.audio.play(),this.spatial&&this.updatePosition()},stop:function(){!this.lastPlayedAudioId||(this.audio.stop(this.lastPlayedAudioId),this.lastPlayedAudioId=null)}})});var yn=Y(()=>{WL.registerComponent("image-texture",{url:{type:WL.Type.String,default:""},meshIndex:{type:WL.Type.Int,default:0},material:{type:WL.Type.Material}},{init:function(){this.material||(console.warn("image-texture: material property not set, please set 'material' instead of deprecated 'meshIndex'."),this.material=this.object.getComponent("mesh",this.meshIndex).material)},start:function(){WL.textures.load(this.url,"anonymous").then(e=>{this.material.shader=="Flat Opaque Textured"?this.material.flatTexture=e:mat.shader=="Phong Opaque Textured"?this.material.diffuseTexture=e:console.error("Shader",this.material.shader,"not supported by image-texture")}).catch(console.err)}})});var Pl={};var gn,Mn=J(()=>{gn=K(re());WL.registerComponent("mouse-look",{sensitity:{type:WL.Type.Float,default:.25},requireMouseDown:{type:WL.Type.Bool,default:!0},mouseButtonIndex:{type:WL.Type.Int,default:0},pointerLockOnClick:{type:WL.Type.Bool,default:!1}},{init:function(){this.currentRotationY=0,this.currentRotationX=0,this.origin=new Float32Array(3),this.parentOrigin=new Float32Array(3),document.addEventListener("mousemove",function(e){if(this.active&&(this.mouseDown||!this.requireMouseDown)){this.rotationY=-this.sensitity*e.movementX/100,this.rotationX=-this.sensitity*e.movementY/100,this.currentRotationX+=this.rotationX,this.currentRotationY+=this.rotationY,this.currentRotationX=Math.min(1.507,this.currentRotationX),this.currentRotationX=Math.max(-1.507,this.currentRotationX),this.object.getTranslationWorld(this.origin);let t=this.object.parent;t!==null&&(t.getTranslationWorld(this.parentOrigin),gn.vec3.sub(this.origin,this.origin,this.parentOrigin)),this.object.resetTranslationRotation(),this.object.rotateAxisAngleRad([1,0,0],this.currentRotationX),this.object.rotateAxisAngleRad([0,1,0],this.currentRotationY),this.object.translate(this.origin)}}.bind(this)),this.pointerLockOnClick&&WL.canvas.addEventListener("mousedown",()=>{WL.canvas.requestPointerLock=WL.canvas.requestPointerLock||WL.canvas.mozRequestPointerLock||WL.canvas.webkitRequestPointerLock,WL.canvas.requestPointerLock()}),this.requireMouseDown&&(this.mouseButtonIndex==2&&WL.canvas.addEventListener("contextmenu",function(e){e.preventDefault()},!1),WL.canvas.addEventListener("mousedown",function(e){if(e.button==this.mouseButtonIndex&&(this.mouseDown=!0,document.body.style.cursor="grabbing",e.button==1))return e.preventDefault(),!1}.bind(this)),WL.canvas.addEventListener("mouseup",function(e){e.button==this.mouseButtonIndex&&(this.mouseDown=!1,document.body.style.cursor="initial")}.bind(this)))},start:function(){this.rotationX=0,this.rotationY=0}})});var bn=Y(()=>{WL.registerComponent("player-height",{height:{type:WL.Type.Float,default:1.75}},{init:function(){WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},start:function(){this.object.resetTranslationRotation(),this.object.translate([0,this.height,0])},onXRSessionStart:function(){["local","viewer"].includes(WebXR.refSpace)||this.object.resetTranslationRotation()},onXRSessionEnd:function(){["local","viewer"].includes(WebXR.refSpace)||(this.object.resetTranslationRotation(),this.object.translate([0,this.height,0]))}})});var An=Y(()=>{WL.registerComponent("target-framerate",{framerate:{type:WL.Type.Float,default:90}},{start:function(){WL.xrSession?this.setTargetFramerate(WL.xrSession):WL.onXRSessionStart.push(this.setTargetFramerate.bind(this))},setTargetFramerate:function(e){if(e.supportedFrameRates&&e.updateTargetFrameRate){let t=WL.xrSession.supportedFrameRates;t.sort((n,r)=>Math.abs(n-this.framerate)-Math.abs(r-this.framerate)),WL.xrSession.updateTargetFrameRate(t[0])}}})});var Il={};var oe,wn=J(()=>{oe=K(re());WL.registerComponent("teleport",{teleportIndicatorMeshObject:{type:WL.Type.Object},camRoot:{type:WL.Type.Object},cam:{type:WL.Type.Object},eyeLeft:{type:WL.Type.Object},eyeRight:{type:WL.Type.Object},handedness:{type:WL.Type.Enum,values:["input component","left","right","none"],default:"input component"},floorGroup:{type:WL.Type.Int,default:1},thumbstickActivationThreshhold:{type:WL.Type.Float,default:-.7},thumbstickDeactivationThreshhold:{type:WL.Type.Float,default:.3},indicatorYOffset:{type:WL.Type.Float,default:.01},rayCastMode:{type:WL.Type.Enum,values:["collision","physx"],default:"collision"},maxDistance:{type:WL.Type.Float,default:100}},{init:function(){if(this._prevThumbstickAxis=new Float32Array(2),this._tempVec=new Float32Array(3),this._tempVec0=new Float32Array(3),this._currentIndicatorRotation=0,this.input=this.object.getComponent("input"),!this.input){console.error(this.object.name,"generic-teleport-component.js: input component is required on the object");return}if(!this.teleportIndicatorMeshObject){console.error(this.object.name,"generic-teleport-component.js: Teleport indicator mesh is missing");return}if(!this.camRoot){console.error(this.object.name,"generic-teleport-component.js: camRoot not set");return}this.isIndicating=!1,this.cam&&(this.isMouseIndicating=!1,WL.canvas.addEventListener("mousedown",this.onMouseDown.bind(this)),WL.canvas.addEventListener("mouseup",this.onMouseUp.bind(this))),this.indicatorHidden=!0,this.hitSpot=new Float32Array(3),this._hasHit=!1,this._extraRotation=0,this._currentStickAxes=new Float32Array(2)},start:function(){if(this.handedness==0){let e=this.object.getComponent("input");e?(this.handedness=e.handedness,this.input=e):console.warn("teleport component on object",this.object.name,'was configured with handedness "input component", but object has no input component.')}else this.handedness=["left","right"][this.handedness-1];WL.onXRSessionStart.push(this.setupVREvents.bind(this)),this.teleportIndicatorMeshObject.active=!1},_getCamRotation:function(){return this.eyeLeft.getForward(this._tempVec),this._tempVec[1]=0,oe.vec3.normalize(this._tempVec,this._tempVec),Math.atan2(this._tempVec[0],this._tempVec[2])},update:function(){let e=0;if(this.gamepad&&this.gamepad.axes&&(this._currentStickAxes[0]=this.gamepad.axes[2],this._currentStickAxes[1]=this.gamepad.axes[3],e=Math.abs(this._currentStickAxes[0])+Math.abs(this._currentStickAxes[1])),!this.isIndicating&&this._prevThumbstickAxis[1]>=this.thumbstickActivationThreshhold&&this._currentStickAxes[1]<this.thumbstickActivationThreshhold?this.isIndicating=!0:this.isIndicating&&e<this.thumbstickDeactivationThreshhold&&(this.isIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,this._extraRotation)),this.isIndicating&&this.teleportIndicatorMeshObject&&this.input){let t=this._tempVec0;oe.quat2.getTranslation(t,this.object.transformWorld);let n=this.object.getForward(this._tempVec),r=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(t,n,1<<this.floorGroup):WL.physics.rayCast(t,n,1<<this.floorGroup,this.maxDistance);r.hitCount>0?(this.indicatorHidden=!1,this._extraRotation=Math.PI+Math.atan2(this._currentStickAxes[0],this._currentStickAxes[1]),this._currentIndicatorRotation=this._getCamRotation()+(this._extraRotation-Math.PI),this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(r.locations[0]),this.teleportIndicatorMeshObject.translate([0,this.indicatorYOffset,0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot.set(r.locations[0]),this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)}else this.teleportIndicatorMeshObject&&this.isMouseIndicating&&this.onMousePressed();this._prevThumbstickAxis.set(this._currentStickAxes)},setupVREvents:function(e){if(this.session=e,e.addEventListener("end",function(){this.gamepad=null,this.session=null}.bind(this)),e.inputSources&&e.inputSources.length)for(let t=0;t<e.inputSources.length;t++){let n=e.inputSources[t];n.handedness==this.handedness&&(this.gamepad=n.gamepad)}e.addEventListener("inputsourceschange",function(t){if(t.added&&t.added.length)for(let n=0;n<t.added.length;n++){let r=t.added[n];r.handedness==this.handedness&&(this.gamepad=r.gamepad)}}.bind(this))},onMouseDown:function(){this.isMouseIndicating=!0},onMouseUp:function(){this.isMouseIndicating=!1,this.teleportIndicatorMeshObject.active=!1,this._hasHit&&this._teleportPlayer(this.hitSpot,0)},onMousePressed:function(){let e=[0,0,0];oe.quat2.getTranslation(e,this.cam.transformWorld);let t=this.cam.getForward(this._tempVec),n=this.rayHit=this.rayCastMode==0?WL.scene.rayCast(e,t,1<<this.floorGroup):WL.physics.rayCast(e,t,1<<this.floorGroup,this.maxDistance);n.hitCount>0?(this.indicatorHidden=!1,t[1]=0,oe.vec3.normalize(t,t),this._currentIndicatorRotation=-Math.sign(t[2])*Math.acos(t[0])-Math.PI*.5,this.teleportIndicatorMeshObject.resetTranslationRotation(),this.teleportIndicatorMeshObject.rotateAxisAngleRad([0,1,0],this._currentIndicatorRotation),this.teleportIndicatorMeshObject.translate(n.locations[0]),this.teleportIndicatorMeshObject.active=!0,this.hitSpot=n.locations[0],this._hasHit=!0):(this.indicatorHidden||(this.teleportIndicatorMeshObject.active=!1,this.indicatorHidden=!0),this._hasHit=!1)},_teleportPlayer:function(e,t){this.camRoot.rotateAxisAngleRad([0,1,0],t);let n=this._tempVec,r=this._tempVec0;this.session?(this.eyeLeft.getTranslationWorld(n),this.eyeRight.getTranslationWorld(r),oe.vec3.add(n,n,r),oe.vec3.scale(n,n,.5)):this.cam.getTranslationWorld(n),this.camRoot.getTranslationWorld(r),oe.vec3.sub(n,r,n),n[0]+=e[0],n[1]=e[1],n[2]+=e[2],this.camRoot.setTranslationWorld(n)}})});var El={};var W,Wl,xn=J(()=>{W=K(re());Math.clamp=function(e,t,n){return Math.max(t,Math.min(e,n))};Wl=function(){let e=new Float32Array(3),t=new Float32Array(3),n=new Float32Array(3),r=new Float32Array(3),a=new Float32Array(3),s=new Float32Array(3),l=new Float32Array(3),f=new Float32Array(4),c=new Float32Array(4),d=new Float32Array(4),i=new Float32Array(4);return function(o,h,u,v,_,p,m,g,M,b){W.vec3.sub(n,v,u);let A=W.vec3.length(n);W.vec3.sub(e,v,_);let w=W.vec3.length(e);W.vec3.sub(e,p,u);let C=Math.clamp(W.vec3.length(e),m,A+w-m);W.vec3.sub(t,_,u),W.vec3.sub(r,u,v),W.vec3.sub(a,_,v),W.vec3.normalize(t,t),W.vec3.normalize(n,n),W.vec3.normalize(r,r),W.vec3.normalize(a,a),W.vec3.normalize(e,e);let O=Math.acos(Math.clamp(W.vec3.dot(t,n),-1,1)),D=Math.acos(Math.clamp(W.vec3.dot(r,a),-1,1)),k=Math.acos(Math.clamp(W.vec3.dot(t,e),-1,1)),j=Math.acos(Math.clamp((w*w-A*A-C*C)/(-2*A*C),-1,1)),F=Math.acos(Math.clamp((C*C-A*A-w*w)/(-2*A*w),-1,1));W.vec3.sub(t,_,u),W.vec3.sub(n,v,u),W.vec3.sub(e,p,u),W.vec3.cross(s,t,n),W.vec3.cross(l,t,e),b?(W.vec3.sub(n,b,v),W.vec3.transformQuat(n,[0,0,-1],M)):W.vec3.sub(n,v,u);let q=W.vec3.length(s);q==0?s.set([1,0,0]):W.vec3.scale(s,s,1/q),W.vec3.normalize(l,l),W.quat.conjugate(g,g),W.quat.setAxisAngle(c,W.vec3.transformQuat(f,s,g),j-O),W.quat.setAxisAngle(i,W.vec3.transformQuat(f,l,g),k),W.quat.mul(o,o,W.quat.mul(f,c,i)),W.quat.normalize(o,o),W.quat.conjugate(M,M),W.quat.setAxisAngle(d,W.vec3.transformQuat(f,s,M),F-D),W.quat.mul(h,h,d),W.quat.normalize(h,h)}}();WL.registerComponent("two-joint-ik-solver",{root:{type:WL.Type.Object},middle:{type:WL.Type.Object},end:{type:WL.Type.Object},target:{type:WL.Type.Object},helper:{type:WL.Type.Object}},{init:function(){this.pos=new Float32Array(3*7),this.p=[this.pos.subarray(0,3),this.pos.subarray(3,6),this.pos.subarray(6,9),this.pos.subarray(9,12),this.pos.subarray(12,15),this.pos.subarray(15,18),this.pos.subarray(18,21)]},update:function(){let e=this.p;this.root.getTranslationWorld(e[0]),this.middle.getTranslationWorld(e[1]),this.end.getTranslationWorld(e[2]),this.target.getTranslationWorld(e[3]);let t=e[4],n=e[5];this.root.getTranslationLocal(t),this.middle.getTranslationLocal(n),this.helper&&this.helper.getTranslationWorld(e[6]),Wl(this.root.transformLocal,this.middle.transformLocal,e[0],e[1],e[2],e[3],.01,this.root.transformWorld.subarray(0,4),this.middle.transformWorld.subarray(0,4),this.helper?e[6]:null),this.root.setTranslationLocal(t),this.middle.setTranslationLocal(n),this.root.setDirty(),this.middle.setDirty()}})});var Tn=Y(()=>{WL.registerComponent("video-texture",{url:{type:WL.Type.String,default:""},material:{type:WL.Type.Material},loop:{type:WL.Type.Bool,default:!0},autoplay:{type:WL.Type.Bool,default:!0},muted:{type:WL.Type.Bool,default:!0}},{init:function(){if(!this.material){console.error("video-texture: material property not set");return}this.loaded=!1,this.frameUpdateRequested=!0},start:function(){if(this.video=document.createElement("video"),this.video.src=this.url,this.video.crossOrigin="anonymous",this.video.loop=this.loop,this.video.muted=this.muted,this.video.addEventListener("playing",function(){this.loaded=!0}.bind(this)),this.autoplay){let e=()=>{this.video.play(),window.removeEventListener("click",e),window.removeEventListener("touchstart",e)};window.addEventListener("click",e),window.addEventListener("touchstart",e)}},click:function(){},applyTexture:function(){let e=this.material;this.texture=new WL.Texture(this.video),e.shader=="Flat Opaque Textured"?e.flatTexture=this.texture:e.shader=="Phong Opaque Textured"?e.diffuseTexture=this.texture:console.error("Shader",e.shader,"not supported by video-texture"),"requestVideoFrameCallback"in this.video?this.video.requestVideoFrameCallback(this.updateVideo.bind(this)):this.video.addEventListener("timeupdate",function(){this.frameUpdateRequested=!0}.bind(this))},update:function(e){this.loaded&&this.frameUpdateRequested&&(this.texture?this.texture.update():this.applyTexture(),this.frameUpdateRequested=!1)},updateVideo:function(){this.frameUpdateRequested=!0,this.video.requestVideoFrameCallback(this.updateVideo.bind(this))}})});var Ln=Y(()=>{WL.registerComponent("vr-mode-active-switch",{activateComponents:{type:WL.Type.Enum,values:["in VR","in non-VR"],default:"in VR"},affectChildren:{type:WL.Type.Bool,default:!0}},{start:function(){this.components=[],this.getComponents(this.object),this.onXRSessionEnd(),WL.onXRSessionStart.push(this.onXRSessionStart.bind(this)),WL.onXRSessionEnd.push(this.onXRSessionEnd.bind(this))},getComponents:function(e){let t=e.getComponents().filter(n=>n.type!="vr-mode-active-switch");if(this.components=this.components.concat(t),this.affectChildren){let n=e.children;for(let r=0;r<n.length;++r)this.getComponents(n[r])}},setComponentsActive:function(e){let t=this.components;for(let n=0;n<t.length;++n)t[n].active=e},onXRSessionStart:function(){!this.active||this.setComponentsActive(this.activateComponents==0)},onXRSessionEnd:function(){!this.active||this.setComponentsActive(this.activateComponents!=0)}})});var kl={};var y,Cl,ql,Sn=J(()=>{y=K(re()),Cl={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]},ql={PositiveX:[1,0,0],NegativeX:[-1,0,0],PositiveY:[0,1,0],NegativeY:[0,-1,0],PositiveZ:[0,0,1],NegativeZ:[0,0,-1]};WL.registerComponent("vrm",{src:{type:WL.Type.String,default:""},lookAtTarget:{type:WL.Type.Object}},{meta:null,bones:{hips:null,spine:null,chest:null,upperChest:null,neck:null,head:null,leftEye:null,rightEye:null,jaw:null,leftUpperLeg:null,leftLowerLeg:null,leftFoot:null,leftToes:null,rightUpperLeg:null,rightLowerLeg:null,rightFoot:null,rightToes:null,leftShoulder:null,leftUpperArm:null,leftLowerArm:null,leftHand:null,rightShoulder:null,rightUpperArm:null,rightLowerArm:null,rightHand:null,leftThumbMetacarpal:null,leftThumbProximal:null,leftThumbDistal:null,leftIndexProximal:null,leftIndexIntermediate:null,leftIndexDistal:null,leftMiddleProximal:null,leftMiddleIntermediate:null,leftMiddleDistal:null,leftRingProximal:null,leftRingIntermediate:null,leftRingDistal:null,leftLittleProximal:null,leftLittleIntermediate:null,leftLittleDistal:null,rightThumbMetacarpal:null,rightThumbProximal:null,rightThumbDistal:null,rightIndexProximal:null,rightIndexIntermediate:null,rightIndexDistal:null,rightMiddleProximal:null,rightMiddleIntermediate:null,rightMiddleDistal:null,rightRingProximal:null,rightRingIntermediate:null,rightRingDistal:null,rightLittleProximal:null,rightLittleIntermediate:null,rightLittleDistal:null},restPose:{},_nodeConstraints:[],_springChains:[],_sphereColliders:[],_capsuleColliders:[],_firstPersonAnnotations:[],_lookAt:null,_initialized:!1,init:function(){this._tempV3=y.vec3.create(),this._tempV3A=y.vec3.create(),this._tempV3B=y.vec3.create(),this._tempQuat=y.quat.create(),this._tempQuatA=y.quat.create(),this._tempQuatB=y.quat.create(),this._tempMat4A=y.mat4.create(),this._tempQuat2=y.quat2.create(),this._tailToShape=y.vec3.create(),this._headToTail=y.vec3.create(),this._inertia=y.vec3.create(),this._stiffness=y.vec3.create(),this._external=y.vec3.create(),this._rightVector=y.vec3.set(y.vec3.create(),1,0,0),this._upVector=y.vec3.set(y.vec3.create(),0,1,0),this._forwardVector=y.vec3.set(y.vec3.create(),0,0,1),this._identityQuat=y.quat.identity(y.quat.create()),this._rad2deg=180/Math.PI},start:function(){if(!this.src){console.error("vrm: src property not set");return}WL.scene.append(this.src,{loadGltfExtensions:!0}).then(({root:e,extensions:t})=>{e.children.forEach(n=>n.parent=this.object),this._initializeVrm(t),e.destroy()})},_initializeVrm:function(e){if(this._initialized)throw Error("VRM component has already been initialized");let t=e.root.VRMC_vrm;if(!t)throw Error("Missing VRM extensions");if(t.specVersion!=="1.0")throw Error(`Unsupported VRM version, only 1.0 is supported, but encountered '${t.specVersion}'`);this.meta=t.meta,this._parseHumanoid(t.humanoid,e),t.firstPerson&&this._parseFirstPerson(t.firstPerson,e),t.lookAt&&this._parseLookAt(t.lookAt),this._findAndParseNodeConstraints(e);let n=e.root.VRMC_springBone;n&&this._parseAndInitializeSpringBones(n,e),this._initialized=!0},_parseHumanoid:function(e,t){for(let n in e.humanBones){if(!(n in this.bones)){console.warn(`Unrecognized bone '${n}'`);continue}let r=e.humanBones[n].node,a=t.idMapping[r];this.bones[n]=WL._wrapObject(a),this.restPose[n]=y.quat.copy(y.quat.create(),this.bones[n].rotationLocal)}},_parseFirstPerson:function(e,t){for(let n of e.meshAnnotations){let r={node:WL._wrapObject(t.idMapping[n.node]),firstPerson:!0,thirdPerson:!0};switch(n.type){case"firstPersonOnly":r.thirdPerson=!1;break;case"thirdPersonOnly":r.firstPerson=!1;break;case"both":break;case"auto":console.warn("First person mesh annotation type 'auto' is not supported, treating as 'both'!");break;default:console.error(`Invalid mesh annotation type '${n.type}'`);break}this._firstPersonAnnotations.push(r)}},_parseLookAt:function(e){if(e.type!=="bone"){console.warn(`Unsupported lookAt type '${e.type}', only 'bone' is supported`);return}let t=n=>({inputMaxValue:n.inputMaxValue,outputScale:n.outputScale});this._lookAt={offsetFromHeadBone:e.offsetFromHeadBone||[0,0,0],horizontalInner:t(e.rangeMapHorizontalInner),horizontalOuter:t(e.rangeMapHorizontalOuter),verticalDown:t(e.rangeMapVerticalDown),verticalUp:t(e.rangeMapVerticalUp)}},_findAndParseNodeConstraints:function(e){let t=n=>{let r=e.node[n.objectId];if(r&&"VRMC_node_constraint"in r){let s=r.VRMC_node_constraint.constraint,l,f;if("roll"in s?(l="roll",f=Cl[s.roll.rollAxis]):"aim"in s?(l="aim",f=ql[s.aim.aimAxis]):"rotation"in s&&(l="rotation"),l){let c=WL._wrapObject(e.idMapping[s[l].source]);this._nodeConstraints.push({type:l,source:c,destination:n,axis:f,weight:s[l].weight,destinationRestLocalRotation:y.quat.copy(y.quat.create(),n.rotationLocal),sourceRestLocalRotation:y.quat.copy(y.quat.create(),c.rotationLocal),sourceRestLocalRotationInv:y.quat.invert(y.quat.create(),c.rotationLocal)})}else console.warn("Unrecognized or invalid VRMC_node_constraint, ignoring it")}for(let a of n.children)t(a)};t(this.object)},_parseAndInitializeSpringBones:function(e,t){let n=(e.colliders||[]).map((a,s)=>{let l="capsule"in a.shape?"capsule":"sphere";return{id:s,object:WL._wrapObject(t.idMapping[a.node]),shape:{isCapsule:l==="capsule",radius:a.shape[l].radius,offset:a.shape[l].offset,tail:a.shape[l].tail},cache:{head:y.vec3.create(),tail:y.vec3.create()}}});this._sphereColliders=n.filter(a=>!a.shape.isCapsule),this._capsuleColliders=n.filter(a=>a.shape.isCapsule);let r=(e.colliderGroups||[]).map(a=>({name:a.name,colliders:a.colliders.map(s=>n[s])}));for(let a of e.springs){let s=[];for(let f of a.joints){let c={hitRadius:0,stiffness:1,gravityPower:0,gravityDir:[0,-1,0],dragForce:.5,node:null,state:null};Object.assign(c,f),c.node=WL._wrapObject(t.idMapping[c.node]),s.push(c)}let l=(a.colliderGroups||[]).flatMap(f=>r[f].colliders);this._springChains.push({name:a.name,center:a.center?WL._wrapObject(t.idMapping[a.center]):null,joints:s,sphereColliders:l.filter(f=>!f.shape.isCapsule),capsuleColliders:l.filter(f=>f.shape.isCapsule)})}for(let a of this._springChains)for(let s=0;s<a.joints.length-1;++s){let l=a.joints[s],f=a.joints[s+1],c=l.node.getTranslationWorld(y.vec3.create()),d=f.node.getTranslationWorld(y.vec3.create()),i=y.vec3.subtract(this._tempV3A,c,d),o={prevTail:d,currentTail:y.vec3.copy(y.vec3.create(),d),initialLocalRotation:y.quat.copy(y.quat.create(),l.node.rotationLocal),initialLocalTransformInvert:y.quat2.invert(y.quat2.create(),l.node.transformLocal),boneAxis:y.vec3.normalize(y.vec3.create(),f.node.getTranslationLocal(this._tempV3)),boneLength:Math.max(.01,y.vec3.length(i)),prevTailCenter:null,currentTailCenter:null};a.center&&(o.prevTailCenter=a.center.transformPointInverseWorld(y.vec3.create(),d),o.currentTailCenter=y.vec3.copy(y.vec3.create(),d)),l.state=o}},update:function(e){!this._initialized||(this._resolveLookAt(),this._resolveConstraints(),this._updateSpringBones(e))},_rangeMap:function(e,t){let n=e.inputMaxValue,r=e.outputScale;return Math.min(t,n)/n*r},_resolveLookAt:function(){if(!this._lookAt||!this.lookAtTarget)return;let e=this.bones.head.transformPointWorld(this._tempV3A,this._lookAt.offsetFromHeadBone),t=this.lookAtTarget.getTranslationWorld(this._tempV3B),n=y.vec3.sub(this._tempV3A,t,e);y.vec3.normalize(n,n),this.bones.head.parent.transformVectorInverseWorld(n);let r=y.vec3.dot(n,this._forwardVector),a=y.vec3.dot(n,this._rightVector),s=Math.atan2(a,r)*this._rad2deg,l=Math.sqrt(a*a+r*r),f=y.vec3.dot(n,this._upVector),c=Math.atan2(-f,l)*this._rad2deg;if(c>0?c=this._rangeMap(this._lookAt.verticalDown,c):c=-this._rangeMap(this._lookAt.verticalUp,-c),this.bones.leftEye){let d=s;d>0?d=this._rangeMap(this._lookAt.horizontalInner,d):d=-this._rangeMap(this._lookAt.horizontalOuter,-d);let i=y.quat.fromEuler(this._tempQuatA,c,d,0);this.bones.leftEye.rotationLocal=y.quat.multiply(i,this.restPose.leftEye,i)}if(this.bones.rightEye){let d=s;d>0?d=this._rangeMap(this._lookAt.horizontalOuter,d):d=-this._rangeMap(this._lookAt.horizontalInner,-d);let i=y.quat.fromEuler(this._tempQuatA,c,d,0);this.bones.rightEye.rotationLocal=y.quat.multiply(i,this.restPose.rightEye,i)}},_resolveConstraints:function(){for(let e of this._nodeConstraints)this._resolveConstraint(e)},_resolveConstraint:function(e){let t=e.destinationRestLocalRotation,n=e.sourceRestLocalRotationInv,r=y.quat.identity(this._tempQuatA);switch(e.type){case"roll":{let a=y.quat.multiply(this._tempQuatA,n,e.source.rotationLocal),s=y.quat.multiply(this._tempQuatA,e.sourceRestLocalRotation,a);y.quat.mul(s,s,n);let l=y.quat.invert(this._tempQuatB,t),f=y.quat.multiply(this._tempQuatB,l,s);y.quat.multiply(f,f,t);let c=y.vec3.transformQuat(this._tempV3A,e.axis,f),d=y.quat.rotationTo(this._tempQuatA,e.axis,c);y.quat.mul(r,t,y.quat.invert(this._tempQuat,d)),y.quat.mul(r,r,f)}break;case"aim":{let a=e.destination.parent.rotationWorld,s=y.vec3.transformQuat(this._tempV3A,e.axis,t);y.vec3.transformQuat(s,s,a);let l=e.source.getTranslationWorld(this._tempV3B);y.vec3.sub(l,l,e.destination.getTranslationWorld(this._tempV3)),y.vec3.normalize(l,l);let f=y.quat.rotationTo(this._tempQuatA,s,l);y.quat.mul(r,y.quat.invert(this._tempQuat,a),f),y.quat.mul(r,r,a),y.quat.mul(r,r,t)}break;case"rotation":{let a=y.quat.mul(r,n,e.source.rotationLocal);y.quat.mul(r,t,a)}break}y.quat.slerp(r,t,r,e.weight),e.destination.rotationLocal=r},_updateSpringBones:function(e){this._sphereColliders.forEach(({object:t,shape:n,cache:r})=>{let a=y.vec3.copy(r.head,n.offset);t.transformVectorWorld(a),y.vec3.add(r.head,t.getTranslationWorld(this._tempV3),a)}),this._capsuleColliders.forEach(({object:t,shape:n,cache:r})=>{let a=t.getTranslationWorld(this._tempV3A),s=y.vec3.copy(r.head,n.offset);t.transformVectorWorld(s),y.vec3.add(r.head,a,s);let l=y.vec3.copy(r.tail,n.tail);t.transformVectorWorld(l),y.vec3.add(r.tail,a,l)}),this._springChains.forEach(t=>{for(let n=0;n<t.joints.length-1;++n){let r=t.joints[n],a=r.node.parent?r.node.parent.rotationWorld:this._identityQuat,s=this._inertia;t.center?(y.vec3.sub(s,r.state.currentTailCenter,r.state.prevTailCenter),t.center.transformVectorWorld(s)):y.vec3.sub(s,r.state.currentTail,r.state.prevTail),y.vec3.scale(s,s,1-r.dragForce);let l=y.vec3.copy(this._stiffness,r.state.boneAxis);y.vec3.transformQuat(l,l,r.state.initialLocalRotation),y.vec3.transformQuat(l,l,a),y.vec3.scale(l,l,e*r.stiffness);let f=y.vec3.scale(this._external,r.gravityDir,e*r.gravityPower),c=y.vec3.copy(this._tempV3A,r.state.currentTail);y.vec3.add(c,c,s),y.vec3.add(c,c,l),y.vec3.add(c,c,f);let d=r.node.getTranslationWorld(this._tempV3B);y.vec3.sub(c,c,d),y.vec3.normalize(c,c),y.vec3.scaleAndAdd(c,d,c,r.state.boneLength);for(let{shape:h,cache:u}of t.sphereColliders){let v=this._tailToShape,_=u.head;v=y.vec3.sub(v,c,_);let p=h.radius+r.hitRadius,m=y.vec3.length(v)-p;m<0&&(y.vec3.normalize(v,v),y.vec3.scaleAndAdd(c,c,v,-m),y.vec3.sub(c,c,d),y.vec3.normalize(c,c),y.vec3.scaleAndAdd(c,d,c,r.state.boneLength))}for(let{shape:h,cache:u}of t.capsuleColliders){let v=this._tailToShape,_=u.head,p=u.tail;v=y.vec3.sub(v,c,_);let m=y.vec3.sub(this._headToTail,p,_),g=y.vec3.dot(m,v);y.vec3.squaredLength(m)<=g?y.vec3.sub(v,c,p):g>0&&(y.vec3.scale(m,m,g/y.vec3.squaredLength(m)),y.vec3.sub(v,v,m));let M=h.radius+r.hitRadius,b=y.vec3.length(v)-M;b<0&&(y.vec3.normalize(v,v),y.vec3.scaleAndAdd(c,c,v,-b),y.vec3.sub(c,c,d),y.vec3.normalize(c,c),y.vec3.scaleAndAdd(c,d,c,r.state.boneLength))}y.vec3.copy(r.state.prevTail,r.state.currentTail),y.vec3.copy(r.state.currentTail,c),t.center&&(y.vec3.copy(r.state.prevTailCenter,r.state.currentTailCenter),y.vec3.copy(r.state.currentTailCenter,c),t.center.transformPointInverseWorld(r.state.currentTailCenter)),r.node.parent.transformPointInverseWorld(c);let i=y.quat2.fromTranslation(this._tempQuat2,c);y.quat2.multiply(i,r.state.initialLocalTransformInvert,i),y.quat2.getTranslation(c,i),y.vec3.normalize(c,c);let o=y.quat.rotationTo(this._tempQuatA,r.state.boneAxis,c);r.node.rotationLocal=y.quat.mul(this._tempQuatA,r.state.initialLocalRotation,o)}})},set firstPerson(e){this._firstPersonAnnotations.forEach(t=>{let n=e==t.firstPerson||e!=t.thirdPerson;t.node.getComponents("mesh").forEach(r=>{r.active=n})})}})});var Dl={};var ze,On=J(()=>{ze=K(re());WL.registerComponent("wasd-controls",{speed:{type:WL.Type.Float,default:.1},headObject:{type:WL.Type.Object}},{init:function(){this.up=!1,this.right=!1,this.down=!1,this.left=!1,window.addEventListener("keydown",this.press.bind(this)),window.addEventListener("keyup",this.release.bind(this))},start:function(){this.headObject=this.headObject||this.object},update:function(){let e=[0,0,0];this.up&&(e[2]-=1),this.down&&(e[2]+=1),this.left&&(e[0]-=1),this.right&&(e[0]+=1),ze.vec3.normalize(e,e),e[0]*=this.speed,e[2]*=this.speed,ze.vec3.transformQuat(e,e,this.headObject.transformWorld),this.object.translate(e)},press:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!0:e.keyCode===39||e.keyCode===68?this.right=!0:e.keyCode===40||e.keyCode===83?this.down=!0:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!0)},release:function(e){e.keyCode===38||e.keyCode===87||e.keyCode===90?this.up=!1:e.keyCode===39||e.keyCode===68?this.right=!1:e.keyCode===40||e.keyCode===83?this.down=!1:(e.keyCode===37||e.keyCode===65||e.keyCode===81)&&(this.left=!1)}})});window.glMatrix=re();an();sn();on();ln();cn();fn();hn();dn();pn();vn();mn();yn();Mn();bn();An();wn();xn();Tn();Ln();Sn();On();WL.registerComponent("button",{buttonMeshObject:{type:WL.Type.Object},hoverMaterial:{type:WL.Type.Material}},{start:function(){this.defaultUrl="http://192.168.20.9:3000/led/",remoteurl=this.defaultUrl,state=!1,statetext="off",this.mesh=this.buttonMeshObject.getComponent("mesh"),this.defaultMaterial=this.mesh.material,this.returnPos=new Float32Array(3),this.buttonMeshObject.getTranslationLocal(this.returnPos),this.target=this.object.getComponent("cursor-target"),this.target.addHoverFunction(this.onHover.bind(this)),this.target.addUnHoverFunction(this.onUnHover.bind(this)),this.target.addDownFunction(this.onDown.bind(this)),this.target.addUpFunction(this.onUp.bind(this)),this.soundClick=this.object.addComponent("howler-audio-source",{src:"sfx/click.wav",spatial:!0}),this.soundUnClick=this.object.addComponent("howler-audio-source",{src:"sfx/unclick.wav",spatial:!0})},onHover:function(e,t){this.mesh.material=this.hoverMaterial,t.type=="finger-cursor"&&this.onDown(e,t),this.hapticFeedback(t.object,.5,50)},onDown:function(e,t){this.soundClick.play(),this.buttonMeshObject.translate([0,-.1,0]),this.hapticFeedback(t.object,1,20),this.turnon()},onUp:function(e,t){this.soundUnClick.play(),this.buttonMeshObject.setTranslationLocal(this.returnPos),this.hapticFeedback(t.object,.7,20)},onUnHover:function(e,t){this.mesh.material=this.defaultMaterial,t.type=="finger-cursor"&&this.onUp(e,t),this.hapticFeedback(t.object,.3,50)},hapticFeedback:function(e,t,n){let r=e.getComponent("input");if(r&&r.xrInputSource){let a=r.xrInputSource.gamepad;a&&a.hapticActuators&&a.hapticActuators[0].pulse(t,n)}},turnon:function(){state=!state,state?stateText="on":stateText="off",fetch(remoteurl+stateText).then(e=>e.text()).then(e=>console.log(e))}});})();
/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */
//# sourceMappingURL=buttonswitch.wlp-bundle.js.map
